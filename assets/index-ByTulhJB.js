import{r as S,a as Wn,u as Nt,b as Vn,c as Gt,R as nt,H as Kn,d as Xn,e as ft}from"./react-vendor-YxvNipAf.js";import{m as R,u as Zn,A as St}from"./animation-vendor-C008dC7C.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Yt={exports:{}},rt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gn=S,Yn=Symbol.for("react.element"),Qn=Symbol.for("react.fragment"),er=Object.prototype.hasOwnProperty,tr=Gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nr={key:!0,ref:!0,__self:!0,__source:!0};function Qt(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)er.call(t,r)&&!nr.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Yn,type:e,key:i,ref:a,props:s,_owner:tr.current}}rt.Fragment=Qn;rt.jsx=Qt;rt.jsxs=Qt;Yt.exports=rt;var o=Yt.exports,bt={},Ot=Wn;bt.createRoot=Ot.createRoot,bt.hydrateRoot=Ot.hydrateRoot;function en(e,t){return function(){return e.apply(t,arguments)}}const{toString:rr}=Object.prototype,{getPrototypeOf:jt}=Object,{iterator:st,toStringTag:tn}=Symbol,ot=(e=>t=>{const n=rr.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),be=e=>(e=e.toLowerCase(),t=>ot(t)===e),at=e=>t=>typeof t===e,{isArray:Le}=Array,Fe=at("undefined");function ze(e){return e!==null&&!Fe(e)&&e.constructor!==null&&!Fe(e.constructor)&&fe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const nn=be("ArrayBuffer");function sr(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&nn(e.buffer),t}const or=at("string"),fe=at("function"),rn=at("number"),qe=e=>e!==null&&typeof e=="object",ar=e=>e===!0||e===!1,Ye=e=>{if(ot(e)!=="object")return!1;const t=jt(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(tn in e)&&!(st in e)},ir=e=>{if(!qe(e)||ze(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},lr=be("Date"),cr=be("File"),dr=be("Blob"),ur=be("FileList"),fr=e=>qe(e)&&fe(e.pipe),mr=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||fe(e.append)&&((t=ot(e))==="formdata"||t==="object"&&fe(e.toString)&&e.toString()==="[object FormData]"))},hr=be("URLSearchParams"),[pr,gr,br,xr]=["ReadableStream","Request","Response","Headers"].map(be),yr=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Je(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),Le(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{if(ze(e))return;const i=n?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let c;for(r=0;r<a;r++)c=i[r],t.call(null,e[c],c,e)}}function sn(e,t){if(ze(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const Re=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,on=e=>!Fe(e)&&e!==Re;function xt(){const{caseless:e,skipUndefined:t}=on(this)&&this||{},n={},r=(s,i)=>{const a=e&&sn(n,i)||i;Ye(n[a])&&Ye(s)?n[a]=xt(n[a],s):Ye(s)?n[a]=xt({},s):Le(s)?n[a]=s.slice():(!t||!Fe(s))&&(n[a]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Je(arguments[s],r);return n}const wr=(e,t,n,{allOwnKeys:r}={})=>(Je(t,(s,i)=>{n&&fe(s)?e[i]=en(s,n):e[i]=s},{allOwnKeys:r}),e),vr=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Nr=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Sr=(e,t,n,r)=>{let s,i,a;const c={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)a=s[i],(!r||r(a,e,t))&&!c[a]&&(t[a]=e[a],c[a]=!0);e=n!==!1&&jt(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},jr=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},Er=e=>{if(!e)return null;if(Le(e))return e;let t=e.length;if(!rn(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Tr=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&jt(Uint8Array)),Cr=(e,t)=>{const r=(e&&e[st]).call(e);let s;for(;(s=r.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},Rr=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Mr=be("HTMLFormElement"),Or=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),Pt=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Pr=be("RegExp"),an=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Je(n,(s,i)=>{let a;(a=t(s,i,e))!==!1&&(r[i]=a||s)}),Object.defineProperties(e,r)},Ar=e=>{an(e,(t,n)=>{if(fe(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(fe(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Ir=(e,t)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Le(e)?r(e):r(String(e).split(t)),n},kr=()=>{},$r=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Fr(e){return!!(e&&fe(e.append)&&e[tn]==="FormData"&&e[st])}const Lr=e=>{const t=new Array(10),n=(r,s)=>{if(qe(r)){if(t.indexOf(r)>=0)return;if(ze(r))return r;if(!("toJSON"in r)){t[s]=r;const i=Le(r)?[]:{};return Je(r,(a,c)=>{const x=n(a,s+1);!Fe(x)&&(i[c]=x)}),t[s]=void 0,i}}return r};return n(e,0)},Dr=be("AsyncFunction"),_r=e=>e&&(qe(e)||fe(e))&&fe(e.then)&&fe(e.catch),ln=((e,t)=>e?setImmediate:t?((n,r)=>(Re.addEventListener("message",({source:s,data:i})=>{s===Re&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Re.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",fe(Re.postMessage)),Ur=typeof queueMicrotask<"u"?queueMicrotask.bind(Re):typeof process<"u"&&process.nextTick||ln,Br=e=>e!=null&&fe(e[st]),u={isArray:Le,isArrayBuffer:nn,isBuffer:ze,isFormData:mr,isArrayBufferView:sr,isString:or,isNumber:rn,isBoolean:ar,isObject:qe,isPlainObject:Ye,isEmptyObject:ir,isReadableStream:pr,isRequest:gr,isResponse:br,isHeaders:xr,isUndefined:Fe,isDate:lr,isFile:cr,isBlob:dr,isRegExp:Pr,isFunction:fe,isStream:fr,isURLSearchParams:hr,isTypedArray:Tr,isFileList:ur,forEach:Je,merge:xt,extend:wr,trim:yr,stripBOM:vr,inherits:Nr,toFlatObject:Sr,kindOf:ot,kindOfTest:be,endsWith:jr,toArray:Er,forEachEntry:Cr,matchAll:Rr,isHTMLForm:Mr,hasOwnProperty:Pt,hasOwnProp:Pt,reduceDescriptors:an,freezeMethods:Ar,toObjectSet:Ir,toCamelCase:Or,noop:kr,toFiniteNumber:$r,findKey:sn,global:Re,isContextDefined:on,isSpecCompliantForm:Fr,toJSONObject:Lr,isAsyncFn:Dr,isThenable:_r,setImmediate:ln,asap:Ur,isIterable:Br};function I(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}u.inherits(I,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:u.toJSONObject(this.config),code:this.code,status:this.status}}});const cn=I.prototype,dn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{dn[e]={value:e}});Object.defineProperties(I,dn);Object.defineProperty(cn,"isAxiosError",{value:!0});I.from=(e,t,n,r,s,i)=>{const a=Object.create(cn);u.toFlatObject(e,a,function(h){return h!==Error.prototype},g=>g!=="isAxiosError");const c=e&&e.message?e.message:"Error",x=t==null&&e?e.code:t;return I.call(a,c,x,n,r,s),e&&a.cause==null&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",i&&Object.assign(a,i),a};const Hr=null;function yt(e){return u.isPlainObject(e)||u.isArray(e)}function un(e){return u.endsWith(e,"[]")?e.slice(0,-2):e}function At(e,t,n){return e?e.concat(t).map(function(s,i){return s=un(s),!n&&i?"["+s+"]":s}).join(n?".":""):t}function zr(e){return u.isArray(e)&&!e.some(yt)}const qr=u.toFlatObject(u,{},null,function(t){return/^is[A-Z]/.test(t)});function it(e,t,n){if(!u.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=u.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,y){return!u.isUndefined(y[j])});const r=n.metaTokens,s=n.visitor||h,i=n.dots,a=n.indexes,x=(n.Blob||typeof Blob<"u"&&Blob)&&u.isSpecCompliantForm(t);if(!u.isFunction(s))throw new TypeError("visitor must be a function");function g(b){if(b===null)return"";if(u.isDate(b))return b.toISOString();if(u.isBoolean(b))return b.toString();if(!x&&u.isBlob(b))throw new I("Blob is not supported. Use a Buffer instead.");return u.isArrayBuffer(b)||u.isTypedArray(b)?x&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function h(b,j,y){let z=b;if(b&&!y&&typeof b=="object"){if(u.endsWith(j,"{}"))j=r?j:j.slice(0,-2),b=JSON.stringify(b);else if(u.isArray(b)&&zr(b)||(u.isFileList(b)||u.endsWith(j,"[]"))&&(z=u.toArray(b)))return j=un(j),z.forEach(function(B,W){!(u.isUndefined(B)||B===null)&&t.append(a===!0?At([j],W,i):a===null?j:j+"[]",g(B))}),!1}return yt(b)?!0:(t.append(At(y,j,i),g(b)),!1)}const v=[],T=Object.assign(qr,{defaultVisitor:h,convertValue:g,isVisitable:yt});function L(b,j){if(!u.isUndefined(b)){if(v.indexOf(b)!==-1)throw Error("Circular reference detected in "+j.join("."));v.push(b),u.forEach(b,function(z,X){(!(u.isUndefined(z)||z===null)&&s.call(t,z,u.isString(X)?X.trim():X,j,T))===!0&&L(z,j?j.concat(X):[X])}),v.pop()}}if(!u.isObject(e))throw new TypeError("data must be an object");return L(e),t}function It(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Et(e,t){this._pairs=[],e&&it(e,this,t)}const fn=Et.prototype;fn.append=function(t,n){this._pairs.push([t,n])};fn.toString=function(t){const n=t?function(r){return t.call(this,r,It)}:It;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Jr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function mn(e,t,n){if(!t)return e;const r=n&&n.encode||Jr;u.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(t,n):i=u.isURLSearchParams(t)?t.toString():new Et(t,n).toString(r),i){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class kt{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){u.forEach(this.handlers,function(r){r!==null&&t(r)})}}const hn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Wr=typeof URLSearchParams<"u"?URLSearchParams:Et,Vr=typeof FormData<"u"?FormData:null,Kr=typeof Blob<"u"?Blob:null,Xr={isBrowser:!0,classes:{URLSearchParams:Wr,FormData:Vr,Blob:Kr},protocols:["http","https","file","blob","url","data"]},Tt=typeof window<"u"&&typeof document<"u",wt=typeof navigator=="object"&&navigator||void 0,Zr=Tt&&(!wt||["ReactNative","NativeScript","NS"].indexOf(wt.product)<0),Gr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Yr=Tt&&window.location.href||"http://localhost",Qr=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Tt,hasStandardBrowserEnv:Zr,hasStandardBrowserWebWorkerEnv:Gr,navigator:wt,origin:Yr},Symbol.toStringTag,{value:"Module"})),le={...Qr,...Xr};function es(e,t){return it(e,new le.classes.URLSearchParams,{visitor:function(n,r,s,i){return le.isNode&&u.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function ts(e){return u.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ns(e){const t={},n=Object.keys(e);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],t[i]=e[i];return t}function pn(e){function t(n,r,s,i){let a=n[i++];if(a==="__proto__")return!0;const c=Number.isFinite(+a),x=i>=n.length;return a=!a&&u.isArray(s)?s.length:a,x?(u.hasOwnProp(s,a)?s[a]=[s[a],r]:s[a]=r,!c):((!s[a]||!u.isObject(s[a]))&&(s[a]=[]),t(n,r,s[a],i)&&u.isArray(s[a])&&(s[a]=ns(s[a])),!c)}if(u.isFormData(e)&&u.isFunction(e.entries)){const n={};return u.forEachEntry(e,(r,s)=>{t(ts(r),s,n,0)}),n}return null}function rs(e,t,n){if(u.isString(e))try{return(t||JSON.parse)(e),u.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const We={transitional:hn,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=u.isObject(t);if(i&&u.isHTMLForm(t)&&(t=new FormData(t)),u.isFormData(t))return s?JSON.stringify(pn(t)):t;if(u.isArrayBuffer(t)||u.isBuffer(t)||u.isStream(t)||u.isFile(t)||u.isBlob(t)||u.isReadableStream(t))return t;if(u.isArrayBufferView(t))return t.buffer;if(u.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return es(t,this.formSerializer).toString();if((c=u.isFileList(t))||r.indexOf("multipart/form-data")>-1){const x=this.env&&this.env.FormData;return it(c?{"files[]":t}:t,x&&new x,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),rs(t)):t}],transformResponse:[function(t){const n=this.transitional||We.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(u.isResponse(t)||u.isReadableStream(t))return t;if(t&&u.isString(t)&&(r&&!this.responseType||s)){const a=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(c){if(a)throw c.name==="SyntaxError"?I.from(c,I.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:le.classes.FormData,Blob:le.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};u.forEach(["delete","get","head","post","put","patch"],e=>{We.headers[e]={}});const ss=u.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),os=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(a){s=a.indexOf(":"),n=a.substring(0,s).trim().toLowerCase(),r=a.substring(s+1).trim(),!(!n||t[n]&&ss[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},$t=Symbol("internals");function He(e){return e&&String(e).trim().toLowerCase()}function Qe(e){return e===!1||e==null?e:u.isArray(e)?e.map(Qe):String(e)}function as(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const is=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function mt(e,t,n,r,s){if(u.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!u.isString(t)){if(u.isString(r))return t.indexOf(r)!==-1;if(u.isRegExp(r))return r.test(t)}}function ls(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function cs(e,t){const n=u.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,i,a){return this[r].call(this,t,s,i,a)},configurable:!0})})}let me=class{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function i(c,x,g){const h=He(x);if(!h)throw new Error("header name must be a non-empty string");const v=u.findKey(s,h);(!v||s[v]===void 0||g===!0||g===void 0&&s[v]!==!1)&&(s[v||x]=Qe(c))}const a=(c,x)=>u.forEach(c,(g,h)=>i(g,h,x));if(u.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if(u.isString(t)&&(t=t.trim())&&!is(t))a(os(t),n);else if(u.isObject(t)&&u.isIterable(t)){let c={},x,g;for(const h of t){if(!u.isArray(h))throw TypeError("Object iterator must return a key-value pair");c[g=h[0]]=(x=c[g])?u.isArray(x)?[...x,h[1]]:[x,h[1]]:h[1]}a(c,n)}else t!=null&&i(n,t,r);return this}get(t,n){if(t=He(t),t){const r=u.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return as(s);if(u.isFunction(n))return n.call(this,s,r);if(u.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=He(t),t){const r=u.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||mt(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function i(a){if(a=He(a),a){const c=u.findKey(r,a);c&&(!n||mt(r,r[c],c,n))&&(delete r[c],s=!0)}}return u.isArray(t)?t.forEach(i):i(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!t||mt(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const n=this,r={};return u.forEach(this,(s,i)=>{const a=u.findKey(r,i);if(a){n[a]=Qe(s),delete n[i];return}const c=t?ls(i):String(i).trim();c!==i&&delete n[i],n[c]=Qe(s),r[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return u.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&u.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[$t]=this[$t]={accessors:{}}).accessors,s=this.prototype;function i(a){const c=He(a);r[c]||(cs(s,a),r[c]=!0)}return u.isArray(t)?t.forEach(i):i(t),this}};me.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);u.reduceDescriptors(me.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});u.freezeMethods(me);function ht(e,t){const n=this||We,r=t||n,s=me.from(r.headers);let i=r.data;return u.forEach(e,function(c){i=c.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function gn(e){return!!(e&&e.__CANCEL__)}function De(e,t,n){I.call(this,e??"canceled",I.ERR_CANCELED,t,n),this.name="CanceledError"}u.inherits(De,I,{__CANCEL__:!0});function bn(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new I("Request failed with status code "+n.status,[I.ERR_BAD_REQUEST,I.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function ds(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function us(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,i=0,a;return t=t!==void 0?t:1e3,function(x){const g=Date.now(),h=r[i];a||(a=g),n[s]=x,r[s]=g;let v=i,T=0;for(;v!==s;)T+=n[v++],v=v%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),g-a<t)return;const L=h&&g-h;return L?Math.round(T*1e3/L):void 0}}function fs(e,t){let n=0,r=1e3/t,s,i;const a=(g,h=Date.now())=>{n=h,s=null,i&&(clearTimeout(i),i=null),e(...g)};return[(...g)=>{const h=Date.now(),v=h-n;v>=r?a(g,h):(s=g,i||(i=setTimeout(()=>{i=null,a(s)},r-v)))},()=>s&&a(s)]}const tt=(e,t,n=3)=>{let r=0;const s=us(50,250);return fs(i=>{const a=i.loaded,c=i.lengthComputable?i.total:void 0,x=a-r,g=s(x),h=a<=c;r=a;const v={loaded:a,total:c,progress:c?a/c:void 0,bytes:x,rate:g||void 0,estimated:g&&c&&h?(c-a)/g:void 0,event:i,lengthComputable:c!=null,[t?"download":"upload"]:!0};e(v)},n)},Ft=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Lt=e=>(...t)=>u.asap(()=>e(...t)),ms=le.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,le.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(le.origin),le.navigator&&/(msie|trident)/i.test(le.navigator.userAgent)):()=>!0,hs=le.hasStandardBrowserEnv?{write(e,t,n,r,s,i,a){if(typeof document>"u")return;const c=[`${e}=${encodeURIComponent(t)}`];u.isNumber(n)&&c.push(`expires=${new Date(n).toUTCString()}`),u.isString(r)&&c.push(`path=${r}`),u.isString(s)&&c.push(`domain=${s}`),i===!0&&c.push("secure"),u.isString(a)&&c.push(`SameSite=${a}`),document.cookie=c.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function ps(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function gs(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function xn(e,t,n){let r=!ps(t);return e&&(r||n==!1)?gs(e,t):t}const Dt=e=>e instanceof me?{...e}:e;function Oe(e,t){t=t||{};const n={};function r(g,h,v,T){return u.isPlainObject(g)&&u.isPlainObject(h)?u.merge.call({caseless:T},g,h):u.isPlainObject(h)?u.merge({},h):u.isArray(h)?h.slice():h}function s(g,h,v,T){if(u.isUndefined(h)){if(!u.isUndefined(g))return r(void 0,g,v,T)}else return r(g,h,v,T)}function i(g,h){if(!u.isUndefined(h))return r(void 0,h)}function a(g,h){if(u.isUndefined(h)){if(!u.isUndefined(g))return r(void 0,g)}else return r(void 0,h)}function c(g,h,v){if(v in t)return r(g,h);if(v in e)return r(void 0,g)}const x={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c,headers:(g,h,v)=>s(Dt(g),Dt(h),v,!0)};return u.forEach(Object.keys({...e,...t}),function(h){const v=x[h]||s,T=v(e[h],t[h],h);u.isUndefined(T)&&v!==c||(n[h]=T)}),n}const yn=e=>{const t=Oe({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:a,auth:c}=t;if(t.headers=a=me.from(a),t.url=mn(xn(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),u.isFormData(n)){if(le.hasStandardBrowserEnv||le.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(u.isFunction(n.getHeaders)){const x=n.getHeaders(),g=["content-type","content-length"];Object.entries(x).forEach(([h,v])=>{g.includes(h.toLowerCase())&&a.set(h,v)})}}if(le.hasStandardBrowserEnv&&(r&&u.isFunction(r)&&(r=r(t)),r||r!==!1&&ms(t.url))){const x=s&&i&&hs.read(i);x&&a.set(s,x)}return t},bs=typeof XMLHttpRequest<"u",xs=bs&&function(e){return new Promise(function(n,r){const s=yn(e);let i=s.data;const a=me.from(s.headers).normalize();let{responseType:c,onUploadProgress:x,onDownloadProgress:g}=s,h,v,T,L,b;function j(){L&&L(),b&&b(),s.cancelToken&&s.cancelToken.unsubscribe(h),s.signal&&s.signal.removeEventListener("abort",h)}let y=new XMLHttpRequest;y.open(s.method.toUpperCase(),s.url,!0),y.timeout=s.timeout;function z(){if(!y)return;const B=me.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),te={data:!c||c==="text"||c==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:B,config:e,request:y};bn(function(Q){n(Q),j()},function(Q){r(Q),j()},te),y=null}"onloadend"in y?y.onloadend=z:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(z)},y.onabort=function(){y&&(r(new I("Request aborted",I.ECONNABORTED,e,y)),y=null)},y.onerror=function(W){const te=W&&W.message?W.message:"Network Error",se=new I(te,I.ERR_NETWORK,e,y);se.event=W||null,r(se),y=null},y.ontimeout=function(){let W=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const te=s.transitional||hn;s.timeoutErrorMessage&&(W=s.timeoutErrorMessage),r(new I(W,te.clarifyTimeoutError?I.ETIMEDOUT:I.ECONNABORTED,e,y)),y=null},i===void 0&&a.setContentType(null),"setRequestHeader"in y&&u.forEach(a.toJSON(),function(W,te){y.setRequestHeader(te,W)}),u.isUndefined(s.withCredentials)||(y.withCredentials=!!s.withCredentials),c&&c!=="json"&&(y.responseType=s.responseType),g&&([T,b]=tt(g,!0),y.addEventListener("progress",T)),x&&y.upload&&([v,L]=tt(x),y.upload.addEventListener("progress",v),y.upload.addEventListener("loadend",L)),(s.cancelToken||s.signal)&&(h=B=>{y&&(r(!B||B.type?new De(null,e,y):B),y.abort(),y=null)},s.cancelToken&&s.cancelToken.subscribe(h),s.signal&&(s.signal.aborted?h():s.signal.addEventListener("abort",h)));const X=ds(s.url);if(X&&le.protocols.indexOf(X)===-1){r(new I("Unsupported protocol "+X+":",I.ERR_BAD_REQUEST,e));return}y.send(i||null)})},ys=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,s;const i=function(g){if(!s){s=!0,c();const h=g instanceof Error?g:this.reason;r.abort(h instanceof I?h:new De(h instanceof Error?h.message:h))}};let a=t&&setTimeout(()=>{a=null,i(new I(`timeout ${t} of ms exceeded`,I.ETIMEDOUT))},t);const c=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(g=>{g.unsubscribe?g.unsubscribe(i):g.removeEventListener("abort",i)}),e=null)};e.forEach(g=>g.addEventListener("abort",i));const{signal:x}=r;return x.unsubscribe=()=>u.asap(c),x}},ws=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,s;for(;r<n;)s=r+t,yield e.slice(r,s),r=s},vs=async function*(e,t){for await(const n of Ns(e))yield*ws(n,t)},Ns=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},_t=(e,t,n,r)=>{const s=vs(e,t);let i=0,a,c=x=>{a||(a=!0,r&&r(x))};return new ReadableStream({async pull(x){try{const{done:g,value:h}=await s.next();if(g){c(),x.close();return}let v=h.byteLength;if(n){let T=i+=v;n(T)}x.enqueue(new Uint8Array(h))}catch(g){throw c(g),g}},cancel(x){return c(x),s.return()}},{highWaterMark:2})},Ut=64*1024,{isFunction:Ge}=u,Ss=(({Request:e,Response:t})=>({Request:e,Response:t}))(u.global),{ReadableStream:Bt,TextEncoder:Ht}=u.global,zt=(e,...t)=>{try{return!!e(...t)}catch{return!1}},js=e=>{e=u.merge.call({skipUndefined:!0},Ss,e);const{fetch:t,Request:n,Response:r}=e,s=t?Ge(t):typeof fetch=="function",i=Ge(n),a=Ge(r);if(!s)return!1;const c=s&&Ge(Bt),x=s&&(typeof Ht=="function"?(b=>j=>b.encode(j))(new Ht):async b=>new Uint8Array(await new n(b).arrayBuffer())),g=i&&c&&zt(()=>{let b=!1;const j=new n(le.origin,{body:new Bt,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!j}),h=a&&c&&zt(()=>u.isReadableStream(new r("").body)),v={stream:h&&(b=>b.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!v[b]&&(v[b]=(j,y)=>{let z=j&&j[b];if(z)return z.call(j);throw new I(`Response type '${b}' is not supported`,I.ERR_NOT_SUPPORT,y)})});const T=async b=>{if(b==null)return 0;if(u.isBlob(b))return b.size;if(u.isSpecCompliantForm(b))return(await new n(le.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(u.isArrayBufferView(b)||u.isArrayBuffer(b))return b.byteLength;if(u.isURLSearchParams(b)&&(b=b+""),u.isString(b))return(await x(b)).byteLength},L=async(b,j)=>{const y=u.toFiniteNumber(b.getContentLength());return y??T(j)};return async b=>{let{url:j,method:y,data:z,signal:X,cancelToken:B,timeout:W,onDownloadProgress:te,onUploadProgress:se,responseType:Q,headers:Se,withCredentials:xe="same-origin",fetchOptions:je}=yn(b),Pe=t||fetch;Q=Q?(Q+"").toLowerCase():"text";let C=ys([X,B&&B.toAbortSignal()],W),ye=null;const pe=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let q;try{if(se&&g&&y!=="get"&&y!=="head"&&(q=await L(Se,z))!==0){let l=new n(j,{method:"POST",body:z,duplex:"half"}),E;if(u.isFormData(z)&&(E=l.headers.get("content-type"))&&Se.setContentType(E),l.body){const[p,P]=Ft(q,tt(Lt(se)));z=_t(l.body,Ut,p,P)}}u.isString(xe)||(xe=xe?"include":"omit");const ne=i&&"credentials"in n.prototype,we={...je,signal:C,method:y.toUpperCase(),headers:Se.normalize().toJSON(),body:z,duplex:"half",credentials:ne?xe:void 0};ye=i&&new n(j,we);let ge=await(i?Pe(ye,je):Pe(j,we));const _e=h&&(Q==="stream"||Q==="response");if(h&&(te||_e&&pe)){const l={};["status","statusText","headers"].forEach(A=>{l[A]=ge[A]});const E=u.toFiniteNumber(ge.headers.get("content-length")),[p,P]=te&&Ft(E,tt(Lt(te),!0))||[];ge=new r(_t(ge.body,Ut,p,()=>{P&&P(),pe&&pe()}),l)}Q=Q||"text";let f=await v[u.findKey(v,Q)||"text"](ge,b);return!_e&&pe&&pe(),await new Promise((l,E)=>{bn(l,E,{data:f,headers:me.from(ge.headers),status:ge.status,statusText:ge.statusText,config:b,request:ye})})}catch(ne){throw pe&&pe(),ne&&ne.name==="TypeError"&&/Load failed|fetch/i.test(ne.message)?Object.assign(new I("Network Error",I.ERR_NETWORK,b,ye),{cause:ne.cause||ne}):I.from(ne,ne&&ne.code,b,ye)}}},Es=new Map,wn=e=>{let t=e&&e.env||{};const{fetch:n,Request:r,Response:s}=t,i=[r,s,n];let a=i.length,c=a,x,g,h=Es;for(;c--;)x=i[c],g=h.get(x),g===void 0&&h.set(x,g=c?new Map:js(t)),h=g;return g};wn();const Ct={http:Hr,xhr:xs,fetch:{get:wn}};u.forEach(Ct,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const qt=e=>`- ${e}`,Ts=e=>u.isFunction(e)||e===null||e===!1;function Cs(e,t){e=u.isArray(e)?e:[e];const{length:n}=e;let r,s;const i={};for(let a=0;a<n;a++){r=e[a];let c;if(s=r,!Ts(r)&&(s=Ct[(c=String(r)).toLowerCase()],s===void 0))throw new I(`Unknown adapter '${c}'`);if(s&&(u.isFunction(s)||(s=s.get(t))))break;i[c||"#"+a]=s}if(!s){const a=Object.entries(i).map(([x,g])=>`adapter ${x} `+(g===!1?"is not supported by the environment":"is not available in the build"));let c=n?a.length>1?`since :
`+a.map(qt).join(`
`):" "+qt(a[0]):"as no adapter specified";throw new I("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return s}const vn={getAdapter:Cs,adapters:Ct};function pt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new De(null,e)}function Jt(e){return pt(e),e.headers=me.from(e.headers),e.data=ht.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),vn.getAdapter(e.adapter||We.adapter,e)(e).then(function(r){return pt(e),r.data=ht.call(e,e.transformResponse,r),r.headers=me.from(r.headers),r},function(r){return gn(r)||(pt(e),r&&r.response&&(r.response.data=ht.call(e,e.transformResponse,r.response),r.response.headers=me.from(r.response.headers))),Promise.reject(r)})}const Nn="1.13.2",lt={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{lt[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Wt={};lt.transitional=function(t,n,r){function s(i,a){return"[Axios v"+Nn+"] Transitional option '"+i+"'"+a+(r?". "+r:"")}return(i,a,c)=>{if(t===!1)throw new I(s(a," has been removed"+(n?" in "+n:"")),I.ERR_DEPRECATED);return n&&!Wt[a]&&(Wt[a]=!0,console.warn(s(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,a,c):!0}};lt.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function Rs(e,t,n){if(typeof e!="object")throw new I("options must be an object",I.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const i=r[s],a=t[i];if(a){const c=e[i],x=c===void 0||a(c,i,e);if(x!==!0)throw new I("option "+i+" must be "+x,I.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new I("Unknown option "+i,I.ERR_BAD_OPTION)}}const et={assertOptions:Rs,validators:lt},Ne=et.validators;let Me=class{constructor(t){this.defaults=t||{},this.interceptors={request:new kt,response:new kt}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Oe(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&et.assertOptions(r,{silentJSONParsing:Ne.transitional(Ne.boolean),forcedJSONParsing:Ne.transitional(Ne.boolean),clarifyTimeoutError:Ne.transitional(Ne.boolean)},!1),s!=null&&(u.isFunction(s)?n.paramsSerializer={serialize:s}:et.assertOptions(s,{encode:Ne.function,serialize:Ne.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),et.assertOptions(n,{baseUrl:Ne.spelling("baseURL"),withXsrfToken:Ne.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=i&&u.merge(i.common,i[n.method]);i&&u.forEach(["delete","get","head","post","put","patch","common"],b=>{delete i[b]}),n.headers=me.concat(a,i);const c=[];let x=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(n)===!1||(x=x&&j.synchronous,c.unshift(j.fulfilled,j.rejected))});const g=[];this.interceptors.response.forEach(function(j){g.push(j.fulfilled,j.rejected)});let h,v=0,T;if(!x){const b=[Jt.bind(this),void 0];for(b.unshift(...c),b.push(...g),T=b.length,h=Promise.resolve(n);v<T;)h=h.then(b[v++],b[v++]);return h}T=c.length;let L=n;for(;v<T;){const b=c[v++],j=c[v++];try{L=b(L)}catch(y){j.call(this,y);break}}try{h=Jt.call(this,L)}catch(b){return Promise.reject(b)}for(v=0,T=g.length;v<T;)h=h.then(g[v++],g[v++]);return h}getUri(t){t=Oe(this.defaults,t);const n=xn(t.baseURL,t.url,t.allowAbsoluteUrls);return mn(n,t.params,t.paramsSerializer)}};u.forEach(["delete","get","head","options"],function(t){Me.prototype[t]=function(n,r){return this.request(Oe(r||{},{method:t,url:n,data:(r||{}).data}))}});u.forEach(["post","put","patch"],function(t){function n(r){return function(i,a,c){return this.request(Oe(c||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}Me.prototype[t]=n(),Me.prototype[t+"Form"]=n(!0)});let Ms=class Sn{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(c=>{r.subscribe(c),i=c}).then(s);return a.cancel=function(){r.unsubscribe(i)},a},t(function(i,a,c){r.reason||(r.reason=new De(i,a,c),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Sn(function(s){t=s}),cancel:t}}};function Os(e){return function(n){return e.apply(null,n)}}function Ps(e){return u.isObject(e)&&e.isAxiosError===!0}const vt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(vt).forEach(([e,t])=>{vt[t]=e});function jn(e){const t=new Me(e),n=en(Me.prototype.request,t);return u.extend(n,Me.prototype,t,{allOwnKeys:!0}),u.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return jn(Oe(e,s))},n}const Y=jn(We);Y.Axios=Me;Y.CanceledError=De;Y.CancelToken=Ms;Y.isCancel=gn;Y.VERSION=Nn;Y.toFormData=it;Y.AxiosError=I;Y.Cancel=Y.CanceledError;Y.all=function(t){return Promise.all(t)};Y.spread=Os;Y.isAxiosError=Ps;Y.mergeConfig=Oe;Y.AxiosHeaders=me;Y.formToJSON=e=>pn(u.isHTMLForm(e)?new FormData(e):e);Y.getAdapter=vn.getAdapter;Y.HttpStatusCode=vt;Y.default=Y;const{Axios:ao,AxiosError:io,CanceledError:lo,isCancel:co,CancelToken:uo,VERSION:fo,all:mo,Cancel:ho,isAxiosError:po,spread:go,toFormData:bo,AxiosHeaders:xo,HttpStatusCode:yo,formToJSON:wo,getAdapter:vo,mergeConfig:No}=Y,ct="https://codeforces.com/api",Vt=2e3;let Kt=0;async function dt(e){var r;const n=Date.now()-Kt;n<Vt&&await new Promise(s=>setTimeout(s,Vt-n)),Kt=Date.now();try{const s=await Y.get(e,{timeout:1e4});if(s.data.status==="OK")return s.data.result;throw new Error(s.data.comment||"Codeforces API error")}catch(s){throw s.response?new Error(`Codeforces API error: ${s.response.status} - ${((r=s.response.data)==null?void 0:r.comment)||"Unknown error"}`):s}}async function As(e){try{const t=await dt(`${ct}/user.info?handles=${e}`);return t&&t.length>0?{valid:!0,handle:t[0].handle,rating:t[0].rating||0,maxRating:t[0].maxRating||0,avatar:t[0].avatar||null}:{valid:!1,error:"Handle not found"}}catch(t){return{valid:!1,error:t.message}}}async function Is(){try{const e=await dt(`${ct}/problemset.problems`);if(!e||!e.problems)return[];const t=new Set;return e.problems.forEach(n=>{n.tags&&Array.isArray(n.tags)&&n.tags.forEach(r=>t.add(r))}),Array.from(t).sort()}catch(e){return console.error("Error fetching tags:",e),[]}}async function ks(e=[],t=3e3,n=800){try{const r=await dt(`${ct}/problemset.problems`);return!r||!r.problems?[]:r.problems.filter(i=>i.rating&&(i.rating>t||i.rating<n)?!1:e.length>0?e.some(a=>i.tags.includes(a)):!0)}catch(r){throw console.error("Error fetching problems:",r),r}}async function En(e){try{return await dt(`${ct}/user.status?handle=${e}`)||[]}catch(t){throw console.error(`Error fetching status for ${e}:`,t),t}}async function $s(e){const t={};for(const n of e)try{t[n]=await En(n)}catch(r){console.error(`Failed to fetch status for ${n}:`,r),t[n]=[]}return t}async function Fs(e,t){if(t.length===0)return e;const n=new Set,r=2;for(let s=0;s<t.length;s+=r){const i=t.slice(s,s+r),a=await $s(i);Object.values(a).forEach(c=>{c.forEach(x=>{if(x.verdict==="OK"){const g=`${x.problem.contestId}-${x.problem.index}`;n.add(g)}})})}return e.filter(s=>{const i=`${s.contestId}-${s.index}`;return!n.has(i)})}function Ls(e){(!e||e<800)&&(e=800);const t=(e-800)/200,n=500*Math.pow(1.32,t);return Math.round(n)}function Xt(e,t=1){return Math.round(Ls(e)*t)}const Ds=5e3;class _s{constructor(t,n,r){this.handles=t,this.matchStartTime=n,this.onNewSubmission=r,this.lastSubmissionIds=new Map,this.isPolling=!1,this.pollingInterval=null,this.lastPollTime=new Map,t.forEach(s=>{this.lastSubmissionIds.set(s,-1),this.lastPollTime.set(s,0)})}start(){this.isPolling||(this.isPolling=!0,this.poll(),this.pollingInterval=setInterval(()=>{this.poll()},Ds))}stop(){this.isPolling=!1,this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null)}async poll(){for(const t of this.handles)try{await this.pollHandle(t),await new Promise(n=>setTimeout(n,500))}catch(n){console.error(`Error polling handle ${t}:`,n)}}async pollHandle(t){try{const r=(await En(t)).filter(a=>a.creationTimeSeconds*1e3>=this.matchStartTime);r.sort((a,c)=>a.id-c.id);const s=this.lastSubmissionIds.get(t),i=r.filter(a=>a.id>s);if(i.length>0){const a=Math.max(...i.map(c=>c.id));this.lastSubmissionIds.set(t,a),i.forEach(c=>{this.onNewSubmission(t,c)})}}catch(n){console.error(`Error polling handle ${t}:`,n)}}}const Tn="/Codeforces-Sonic-battle-game/assets/sonic-avatar-CZ9HXqrH.png";function Us({message:e="Loading..."}){return o.jsx("div",{className:"fixed inset-0 bg-gray-900/95 backdrop-blur-xl z-50 flex items-center justify-center",children:o.jsxs("div",{className:"sonic-neon-container",children:[o.jsxs("div",{className:"sonic-avatar-container",children:[o.jsx("div",{className:"sonic-ring-spinner"}),o.jsx("img",{src:Tn,alt:"Sonic Loading",className:"sonic-avatar"})]}),o.jsxs(R.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-center",children:[o.jsx("h2",{className:"text-3xl font-bold loading-text mb-2",children:e}),o.jsx("p",{className:"loading-subtext",children:"Preparing the Zone..."})]})]})})}function Bs({message:e="Loading..."}){return o.jsx(Us,{message:e})}function Hs({darkMode:e}){const[t,n]=S.useState(!1),r=[{title:"Game Setup",icon:"ðŸŽ®",content:["Choose 2-4 players with unique Codeforces handles.","Select specific topics or All Topics.","Set difficulty (800-3000) and duration.","Enable 'Final Lap' for 2x points in last 25%!"]},{title:"Match Logic",icon:"ðŸŽ¯",content:["Hidden 'Mystery Problem' awards 2x points.","First to solve gets the points (lowest submission ID).","Already solved problems are filtered out.","Real-time 5s checks for submissions."]},{title:"Scoring System",icon:"ðŸ’Ž",content:["Points = 500 Ã— (1.32^((Rating - 800)/200))","Stack multipliers: Mystery (2x) + Final Lap (2x) = 4x!","Example: 1500 rating = ~1134 points base."]},{title:"Problem Status",icon:"ðŸ“Š",content:["âœ… AC: Points awarded","âŒ WA: Incorrect output","âš ï¸ TLE: Too slow","Ratings & Tags hidden during match!"]},{title:"Features",icon:"âš¡",content:["Live Leaderboard with Sonic sprites","Ring Collection Animations","Dark Mode Default","Detailed Results & Mystery Reveal"]},{title:"Tips & Strategy",icon:"ðŸ’¡",content:["Speed is key for claiming points.","Save hard problems for Final Lap (2x).","Balance difficulty vs time.","Watch opponents' progress!"]}];return o.jsx(R.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8 rounded-2xl p-0.5 relative bg-gradient-to-r from-sonic-gold/30 to-blue-500/30",style:{zIndex:10},children:o.jsxs("div",{className:`rounded-2xl p-6 shadow-xl backdrop-blur-md ${e?"bg-gray-900/90":"bg-blue-900/90"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[o.jsx("span",{className:"text-4xl",children:"ðŸ“š"})," How to Play"]}),o.jsx("button",{onClick:()=>n(!t),className:`px-6 py-2 rounded-xl font-bold transition-all duration-200 border-2 ${e?"bg-gray-800 hover:bg-gray-700 text-white border-gray-600":"bg-blue-700 hover:bg-blue-600 text-white border-blue-400"}`,children:t?"â–² Collapse":"â–¼ Expand"})]}),t&&o.jsx(R.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map((s,i)=>o.jsxs(R.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:i*.05},className:`p-5 rounded-xl border-2 transition-all hover:scale-[1.02] ${e?"bg-gray-800/50 border-gray-700 hover:border-gray-500":"bg-blue-800/20 border-blue-400/30 hover:border-sonic-gold/50"}`,children:[o.jsxs("h3",{className:"text-xl font-bold text-sonic-gold mb-3 flex items-center gap-2",children:[o.jsx("span",{className:"text-2xl",children:s.icon})," ",s.title]}),o.jsx("ul",{className:"space-y-2",children:s.content.map((a,c)=>o.jsxs("li",{className:`text-sm flex items-start gap-2 ${e?"text-gray-300":"text-blue-100"}`,children:[o.jsx("span",{className:"text-sonic-gold mt-1",children:"â€¢"}),o.jsx("span",{children:a})]},c))})]},i))})]})})}function zs({countdown:e,inviteLink:t,darkMode:n}){const[r,s]=S.useState(!1),i=c=>{const x=Math.floor(c/1e3),g=Math.floor(x/3600),h=Math.floor(x%3600/60),v=x%60;return g>0?`${g}:${h.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`:`${h}:${v.toString().padStart(2,"0")}`},a=()=>{t&&navigator.clipboard.writeText(t).then(()=>{s(!0),setTimeout(()=>s(!1),2e3)}).catch(c=>{console.error("Failed to copy:",c)})};return o.jsxs(R.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:`mt-8 p-10 rounded-3xl border-2 backdrop-blur-xl relative overflow-hidden transition-all duration-300 ${n?"bg-gray-900/80 border-blue-500/30 shadow-[0_0_50px_rgba(59,130,246,0.2)]":"bg-blue-900/80 border-sonic-gold/50 shadow-[0_0_50px_rgba(251,191,36,0.3)]"}`,children:[o.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/10 rounded-full blur-3xl -z-10 animate-pulse"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-yellow-500/10 rounded-full blur-3xl -z-10 animate-pulse",style:{animationDelay:"1s"}}),o.jsxs("div",{className:"flex flex-col items-center text-center z-10 relative",children:[o.jsx("div",{className:"sonic-neon-container mb-8 scale-110",children:o.jsxs("div",{className:"sonic-avatar-container",children:[o.jsx("div",{className:"sonic-ring-spinner"}),o.jsx("img",{src:Tn,alt:"Sonic Waiting",className:"sonic-avatar"})]})}),o.jsxs("div",{className:"mb-8",children:[o.jsx("div",{className:"text-sm font-bold uppercase tracking-widest text-blue-400 mb-2",children:"Time Until Battle"}),o.jsx("div",{className:"text-6xl md:text-8xl font-black tabular-nums tracking-tight loading-text",children:i(e)})]}),o.jsx("p",{className:`text-xl font-medium mb-8 max-w-lg ${n?"text-gray-300":"text-blue-100"}`,children:"Sharpen your claws! The zone is loading and the battle will start automatically."}),t&&o.jsx(R.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"w-full max-w-2xl p-1 rounded-2xl bg-gradient-to-r from-blue-600 via-purple-600 to-blue-600 p-[2px]",children:o.jsxs("div",{className:`p-5 rounded-2xl ${n?"bg-gray-900":"bg-blue-950"} h-full`,children:[o.jsxs("label",{className:"block text-xs font-bold uppercase tracking-wider text-center text-blue-400 mb-3",children:[o.jsx("span",{className:"mr-2",children:"ðŸ”—"}),"  Invite Challengers"]}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[o.jsx("div",{className:`flex-1 flex items-center px-4 py-3 rounded-xl border border-white/10 ${n?"bg-black/40":"bg-black/30"} min-w-0 overflow-hidden`,children:o.jsx("code",{className:"text-sm text-blue-200 truncate font-mono select-all w-full",children:t})}),o.jsx(R.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:a,className:`px-8 py-3 font-bold rounded-xl shadow-lg transition-all flex items-center justify-center gap-2 min-w-[140px] ${r?"bg-blue-600 text-white shadow-blue-500/20":"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-400 hover:to-green-500 text-white shadow-green-500/20"}`,children:o.jsx(R.span,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:r?"COPIED! âœ“":"COPY"},r?"copied":"copy")})]})]})})]})]})}const Cn=S.memo(({problem:e,sonicPoints:t,status:n,solvedBy:r,onClick:s})=>{const i=`https://codeforces.com/problemset/problem/${e.contestId}/${e.index}`,c=(()=>{switch(n){case"AC":return{bg:"bg-green-900/40",border:"border-green-500",text:"text-green-400",badge:"bg-green-600",label:"AC"};case"WA":return{bg:"bg-red-900/40",border:"border-red-500",text:"text-red-400",badge:"bg-red-600",label:"WA"};case"TLE":return{bg:"bg-yellow-900/40",border:"border-yellow-500",text:"text-yellow-400",badge:"bg-yellow-600",label:"TLE"};default:return{bg:"bg-blue-900/50",border:"border-blue-600",text:"text-blue-300",badge:null,label:null}}})();return o.jsxs(R.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.2},className:`relative p-4 rounded-lg border-2 transition-all ${c.bg} ${c.border} hover:border-sonic-gold`,style:{willChange:"auto"},children:[c.badge&&o.jsx("div",{className:`absolute top-2 right-2 px-2 py-1 ${c.badge} text-white text-xs font-bold rounded`,children:c.label}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1 pr-4",children:[o.jsxs("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"text-lg font-bold text-white hover:text-sonic-gold transition-colors",children:[e.contestId,e.index,". ",e.name]}),r&&o.jsxs("div",{className:`text-sm mt-1 ${c.text} font-semibold`,children:["âœ“ Solved by: ",r]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-2xl font-bold text-sonic-gold neon-glow",children:Math.round(t)}),o.jsx("div",{className:"text-xs text-blue-300",children:"Points"})]})]})]})});Cn.displayName="ProblemCard";const Rn=S.memo(({player:e,points:t,maxPoints:n,rank:r,previousPoints:s})=>{const i=n>0?t/n*100:0,a=n>0&&s!==void 0?s/n*100:0,c=`${i}%`,x=Zn(),g=S.useRef(!1);S.useEffect(()=>{s!==void 0&&t>s&&(g.current=!0,x.start({scale:[1,1.2,1],transition:{duration:.5}}),setTimeout(()=>{g.current=!1},500))},[t,s,x]);const h={1:"from-sonic-gold to-yellow-400",2:"from-gray-300 to-gray-400",3:"from-orange-600 to-orange-500",4:"from-blue-400 to-blue-500"},v={1:"ðŸ¥‡",2:"ðŸ¥ˆ",3:"ðŸ¥‰",4:"ðŸƒ"};return o.jsxs(R.div,{className:"relative mb-4",animate:x,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:v[r]||"ðŸƒ"}),o.jsx("span",{className:"font-bold text-lg",children:e.handle}),e.rating>0&&o.jsxs("span",{className:"text-sm text-blue-300",children:["(",e.rating,")"]})]}),o.jsxs(R.div,{className:"text-right",animate:g.current?{scale:[1,1.2,1],color:["#FFD700","#FFFF00","#FFD700"]}:{},transition:{duration:.5},children:[o.jsx("div",{className:"text-xl font-bold text-sonic-gold",children:t}),o.jsx("div",{className:"text-xs text-blue-300",children:"points"})]})]}),o.jsxs("div",{className:"track-lane h-8 rounded-full overflow-hidden relative",children:[o.jsx(R.div,{initial:{width:a},animate:{width:`${i}%`},transition:{duration:.5,ease:"easeOut"},className:`h-full bg-gradient-to-r ${h[r]||"from-blue-500 to-blue-400"} shadow-lg relative`,children:g.current&&o.jsx(R.div,{initial:{opacity:.5,scale:1},animate:{opacity:0,scale:1.5},transition:{duration:.5},className:"absolute inset-0 bg-white/30 rounded-full"})}),o.jsx(R.div,{initial:{left:a>0?`${a}%`:"0%"},animate:{left:c},transition:{duration:.5,ease:"easeOut"},className:"absolute top-0 h-8 w-8 flex items-center justify-center text-xl pointer-events-none",style:{transform:"translateX(-50%)"},children:o.jsx("span",{className:"drop-shadow-lg",children:"âš¡"})})]})]})});Rn.displayName="PlayerProgress";function qs({show:e,onComplete:t}){const[n,r]=S.useState(e);return S.useEffect(()=>{if(e){r(!0);const s=setTimeout(()=>{r(!1),t==null||t()},600);return()=>clearTimeout(s)}},[e,t]),n?o.jsx("div",{className:"fixed inset-0 pointer-events-none z-50 flex items-center justify-center",children:o.jsx(R.div,{initial:{scale:0,rotate:0,opacity:1},animate:{scale:2,rotate:360,opacity:0},transition:{duration:.6,ease:"easeOut"},className:"text-6xl",children:"ðŸ’Ž"})}):null}function Js(){return o.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 rounded-lg border-2 bg-blue-900/50 border-blue-600 animate-pulse",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"h-6 bg-blue-700/50 rounded w-3/4 mb-2"}),o.jsx("div",{className:"h-4 bg-blue-700/30 rounded w-1/2"})]}),o.jsx("div",{className:"h-8 w-16 bg-blue-700/50 rounded"})]})})}function Ws({options:e,darkMode:t,children:n}){const[r,s]=S.useState(!1),i=S.useRef(null);return S.useEffect(()=>{const a=c=>{i.current&&!i.current.contains(c.target)&&s(!1)};return r&&document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[r]),o.jsxs("div",{className:"relative mb-6",ref:i,children:[o.jsxs("button",{onClick:()=>s(!r),className:`w-full flex items-center justify-between px-6 py-4 rounded-xl font-bold text-lg transition-all duration-300 border-2 shadow-lg ${t?"bg-gray-800/60 border-gray-600 text-white hover:bg-gray-700/60":"bg-blue-900/60 border-sonic-gold text-white hover:bg-blue-800/70"}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-xl",children:"âš™ï¸"}),o.jsx("span",{children:"Customize Match"})]}),o.jsx(R.span,{animate:{rotate:r?180:0},transition:{duration:.2},className:"text-sonic-gold",children:"â–¼"})]}),o.jsx(St,{children:r&&o.jsx(R.div,{initial:{opacity:0,y:-10,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:-10,height:0},transition:{duration:.2},className:`mt-2 rounded-xl overflow-hidden shadow-2xl border-2 backdrop-blur-xl ${t?"bg-gray-900/95 border-gray-600":"bg-black/80 border-sonic-gold"}`,children:o.jsx("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map((a,c)=>o.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl border-2 transition-all duration-200 ${t?"bg-gray-800/50 border-gray-700 hover:border-gray-500 hover:bg-gray-800":"bg-blue-800/20 border-blue-400/30 hover:border-sonic-gold/50 hover:bg-blue-800/30"}`,children:[o.jsx("span",{className:`font-semibold ${t?"text-gray-200":"text-white"}`,children:a.label}),o.jsx("button",{onClick:()=>a.onChange(!a.checked),className:`relative w-14 h-8 rounded-full transition-all duration-300 ${a.checked?"bg-sonic-gold shadow-[0_0_10px_rgba(255,215,0,0.5)]":"bg-gray-600"}`,children:o.jsx(R.div,{className:"absolute top-1 left-1 w-6 h-6 rounded-full bg-white shadow-md",animate:{x:a.checked?24:0},transition:{type:"spring",stiffness:500,damping:30}})})]},c))})})})]})}const Vs="/Codeforces-Sonic-battle-game/assets/sonic-vs-DZExhZ7P.png";function Ks(){const e=Nt(),[t]=Vn(),[n,r]=S.useState(2),[s,i]=S.useState(()=>{try{const d=localStorage.getItem("savedPlayerHandles");if(d){const m=JSON.parse(d);if(Array.isArray(m)&&m.length>=2)return m}}catch(d){console.error("Failed to load saved handles:",d)}return["",""]}),[a,c]=S.useState({}),[x,g]=S.useState(!1),[h,v]=S.useState({}),[T,L]=S.useState(!1),[b,j]=S.useState([]),[y,z]=S.useState(2e3),[X,B]=S.useState(800),[W,te]=S.useState(60),[se,Q]=S.useState(10),[Se,xe]=S.useState(!1),[je,Pe]=S.useState(!1),[C]=S.useState(!0),[ye,pe]=S.useState([]),[q,ne]=S.useState(""),[we,ge]=S.useState(null),[_e,f]=S.useState(null),[l,E]=S.useState(""),[p,P]=S.useState(null),[A,k]=S.useState(new Map),[M,$]=S.useState(new Map),[D,V]=S.useState(new Map),[J,K]=S.useState(new Map),[ee,F]=S.useState(!1),[re,ae]=S.useState(0),[oe,ce]=S.useState(!1),he=S.useRef(null),[de,Ue]=S.useState(""),[Ve,Te]=S.useState(!1),[ve,Ce]=S.useState(!1),[Ee,ie]=S.useState(""),Ke=S.useRef(null),Ae=S.useRef({}),Be=S.useRef(null);S.useEffect(()=>{let d=!0;return(async()=>{try{const w=await Is();d&&pe(w)}catch(w){console.error("Error fetching tags:",w)}})(),()=>{d=!1}},[]),S.useEffect(()=>{const d=m=>{Ke.current&&!Ke.current.contains(m.target)&&xe(!1)};return Se&&document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[Se]),S.useEffect(()=>()=>{Be.current&&clearInterval(Be.current)},[]),S.useEffect(()=>{const d=setTimeout(()=>{s.some(m=>m.length>0)&&localStorage.setItem("savedPlayerHandles",JSON.stringify(s))},500);return()=>clearTimeout(d)},[s]),S.useEffect(()=>{const d=sessionStorage.getItem("matchConfig"),m=t.get("invite")||new URLSearchParams(window.location.search).get("invite"),w=N=>{if(N.players&&Array.isArray(N.players)&&N.players.length>0&&N.problems&&Array.isArray(N.problems)){const O=Date.now(),H=N.startTime||O,G=N.endTime||H+(N.matchDuration||60)*60*1e3,_=O>=H;P(N),ce(_),ae(_?Math.max(0,G-O):Math.max(0,H-O));const U=new Map,Z=new Map;N.players.forEach(ue=>{ue&&ue.handle&&(U.set(ue.handle,0),Z.set(ue.handle,0))}),k(U),$(Z),(!d||JSON.stringify(JSON.parse(d))!==JSON.stringify(N))&&sessionStorage.setItem("matchConfig",JSON.stringify(N)),_||e("/countdown")}};if(m){let N=null;try{if(m.length>50){const O=decodeURIComponent(escape(window.atob(m))),H=JSON.parse(O);H&&H.matchId&&(N=H,console.log("Successfully decoded serverless match config"))}}catch{}if(!N){console.log("Loading match config from local storage for invite:",m);const O=localStorage.getItem(`matchConfig_${m}`);if(O)try{N=JSON.parse(O)}catch(H){console.error("Error parsing local config:",H)}}if(N){w(N);return}else{Te(!0),Ue(m),ie("Match not found. The invite link might be invalid or expired.");return}}if(d)try{const N=JSON.parse(d);w(N)}catch(N){console.error("Error parsing match config:",N)}},[t]),S.useEffect(()=>{if(!p)return;const d=setInterval(()=>{const m=Date.now(),w=p.startTime||m,N=p.endTime||w+(p.matchDuration||60)*60*1e3;m<w?(ae(Math.max(0,w-m)),ce(!1)):(ce(!0),ae(Math.max(0,N-m)))},1e3);return()=>clearInterval(d)},[p]),S.useEffect(()=>{if(!p||re>0||!oe)return;he.current&&he.current.stop();const d={players:Array.from(A.entries()).map(([m,w])=>({handle:m,points:w,playerInfo:p.players.find(N=>N.handle===m)})).sort((m,w)=>w.points-m.points),solvedProblems:Array.from(D.entries()),matchConfig:p};sessionStorage.setItem("matchResults",JSON.stringify(d)),e("/results")},[re,p,A,D,e,oe]);const Ie=S.useCallback((d,m,w)=>{const N=w.creationTimeSeconds*1e3;if(V(O=>{const H=new Map(O);return H.set(d,{handle:m,submissionId:w.id,time:N}),H}),p){const O=p.problems.find(H=>`${H.contestId}-${H.index}`===d);if(O&&O.rating){const H=Date.now(),G=p.matchDuration*60*1e3,_=p.startTime+G*.75,U=p.finalLap&&H>=_;let Z=1;U&&(Z*=2);const ue=Xt(O.rating,Z);k(ke=>{const $e=new Map(ke),Jn=$e.get(m)||0;return $(new Map(ke)),$e.set(m,Jn+ue),$e}),F(!0),setTimeout(()=>F(!1),600)}}},[p]),Xe=S.useCallback((d,m)=>{if(!p)return;const w=`${m.problem.contestId}-${m.problem.index}`;if(K(N=>{const O=new Map(N);return O.has(w)||O.set(w,new Map),O.get(w).set(d,m.verdict),O}),m.verdict==="OK"){const N=m.creationTimeSeconds*1e3,O=D.get(w);(!O||N<O.time||N===O.time&&m.id<O.submissionId)&&Ie(w,d,m)}},[p,D,Ie]);S.useEffect(()=>{if(!p||!oe)return;const d=p.players.map(w=>w.handle),m=new _s(d,p.startTime,Xe);return he.current=m,m.start(),()=>m.stop()},[p,oe,Xe]);const Ze=d=>{d<2&&(d=2),r(d);const m=Array(d).fill("").map((w,N)=>s[N]||"");i(m),c({}),v({})},An=()=>{Ze(n+1)},In=()=>{n>2&&Ze(n-1)},kn=S.useCallback(async(d,m)=>{if(!m||m.trim().length===0){c(w=>{const N={...w};return delete N[d],N}),v(w=>{const N={...w};return delete N[d],N});return}Ae.current[d]&&clearTimeout(Ae.current[d]),Ae.current[d]=setTimeout(async()=>{try{const w=await As(m.trim());w.valid?(c(N=>({...N,[d]:w})),v(N=>{const O={...N};return delete O[d],O})):(v(N=>({...N,[d]:w.error||"Invalid handle"})),c(N=>{const O={...N};return delete O[d],O}))}catch(w){v(N=>({...N,[d]:w.message||"Validation error"}))}},500)},[]),$n=(d,m)=>{const w=[...s];w[d]=m.trim(),i(w),kn(d,m.trim())},Fn=d=>{Pe(d),d?(j([]),xe(!1)):b.length===0&&xe(!0)},Ln=d=>{j(m=>m.includes(d)?m.filter(N=>N!==d):[...m,d])},Dn=()=>{j([...ye])},_n=()=>{j([])},Un=async()=>{if(console.log("Start Battle button clicked"),!q){ie("Please select a start time before starting the battle");return}const d=new Date(q).getTime(),m=Date.now();if(d<=m){ie("Start time must be in the future");return}if(Object.keys(a).length!==n){ie("Please wait for all handles to be validated");return}Ce(!0),ie("");try{const w=`match-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;console.log("Generated match ID:",w);const N=je?[]:b;console.log("Fetching problems...");const O=await ks(N,y,X);if(O.length===0){ie("No problems found matching the criteria"),Ce(!1);return}console.log(`Found ${O.length} problems, filtering unsolved...`);const H=Object.values(a).map($e=>$e.handle),G=await Fs(O,H);if(G.length===0){ie("No unsolved problems found. Try adjusting categories or max rating."),Ce(!1);return}console.log(`Found ${G.length} unsolved problems`);let _=G;se>0&&se<G.length&&(_=[...G].sort(()=>Math.random()-.5).slice(0,se)),console.log(`Selected ${_.length} problems for match`);const U={players:Object.values(a),problems:_,finalLap:T,selectedCategories:N,maxRating:y,minRating:X,matchDuration:W,numberOfProblems:se,startTime:d,endTime:d+W*60*1e3,matchId:w};sessionStorage.setItem("matchConfig",JSON.stringify(U));const Z=JSON.stringify(U),ke=`https://Abdelrahman139.github.io/Codeforces-Sonic-battle-game/#/?invite=${btoa(unescape(encodeURIComponent(Z)))}`;E(ke),localStorage.setItem(`matchConfig_${w}`,JSON.stringify(U)),console.log("Match prepared, redirecting to countdown page..."),Ce(!1),e("/countdown")}catch(w){console.error("Error starting match:",w),ie(`Failed to start match: ${w.message}`),Ce(!1)}},Mt=S.useMemo(()=>{if(!(p!=null&&p.problems)||!Array.isArray(p.problems))return new Map;const d=new Map,m=Date.now(),w=(p.matchDuration||60)*60*1e3,O=(p.startTime||m)+w*.75,H=p.finalLap&&m>=O;return p.problems.forEach((G,_)=>{if(!G)return;const U=G.rating||1500;let Z=1;H&&(Z*=2);const ue=Xt(U,Z),ke=`${G.contestId}-${G.index}`;d.set(ke,ue)}),d},[p==null?void 0:p.problems,p==null?void 0:p.matchDuration,p==null?void 0:p.startTime,p==null?void 0:p.finalLap]),ut=S.useMemo(()=>p!=null&&p.players?Array.from(A.entries()).map(([d,m])=>({handle:d,points:m,player:p.players.find(w=>w.handle===d)})).filter(d=>d.player).sort((d,m)=>m.points-d.points):[],[A,p==null?void 0:p.players]),Bn=ut.length>0?ut[0].points:1,Hn=S.useMemo(()=>!(p!=null&&p.problems)||!Array.isArray(p.problems)?[]:[...p.problems].map(d=>{if(!d)return null;const m=`${d.contestId}-${d.index}`,w=Mt.get(m)||0;return{problem:d,problemId:m,points:w}}).filter(Boolean).sort((d,m)=>(d.problem.rating||0)-(m.problem.rating||0)),[p==null?void 0:p.problems,Mt]),zn=d=>{const m=Math.floor(d/1e3),w=Math.floor(m/60),N=m%60;return`${w}:${N.toString().padStart(2,"0")}`};if(ve)return o.jsx(Bs,{message:Ee||"Preparing match..."});const qn=()=>{he.current&&he.current.stop(),sessionStorage.removeItem("matchConfig"),P(null),ce(!1),k(new Map),$(new Map),V(new Map),K(new Map),ae(0),F(!1),e("/",{replace:!0})};if(p&&oe){const d=p.matchDuration*60*1e3,m=p.startTime+d*.75,w=p.finalLap&&Date.now()>=m;return o.jsxs("div",{className:`min-h-screen p-4 md:p-8 pt-20 relative transition-colors duration-300 ${C?"bg-gray-900":""}`,style:{zIndex:10},children:[o.jsxs("div",{className:"fixed top-0 left-0 w-full h-full pointer-events-none overflow-hidden",style:{zIndex:0},children:[o.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[50vw] h-[50vw] bg-blue-600/10 rounded-full blur-[100px]"}),o.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[50vw] h-[50vw] bg-yellow-500/10 rounded-full blur-[100px]"})]}),o.jsxs("div",{className:"w-full max-w-[95%] 2xl:max-w-[1800px] mx-auto relative px-4",style:{zIndex:10},children:[o.jsx("div",{className:"absolute top-4 right-4",style:{zIndex:20},children:o.jsxs(R.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:qn,className:`px-5 py-2.5 rounded-xl font-semibold transition-all duration-300 flex items-center gap-2 shadow-lg backdrop-blur-md ${C?"bg-red-900/80 hover:bg-red-800 text-white border border-red-500/50":"bg-red-600 hover:bg-red-700 text-white shadow-red-500/50"}`,children:[o.jsx("span",{className:"text-xl",children:"ðŸšª"}),o.jsx("span",{children:"Leave Battle"})]})}),o.jsx(St,{children:ee&&o.jsx(qs,{show:ee,onComplete:()=>F(!1)})}),o.jsxs("div",{className:"flex flex-col items-center mb-10 relative",children:[o.jsxs(R.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",duration:1.5},className:"mb-8 relative w-48 h-48 md:w-64 md:h-64 flex items-center justify-center bg-black/50 rounded-full",children:[o.jsx("div",{className:"sonic-ring-spinner",style:{borderWidth:"4px"}}),o.jsx("img",{src:Vs,alt:"Sonic vs Sonic",className:"w-[90%] h-[90%] object-cover rounded-full drop-shadow-[0_0_25px_rgba(255,215,0,0.4)]"})]}),o.jsx("h1",{className:"text-4xl md:text-6xl font-black mb-2 tracking-tighter italic",style:{color:"#FFD700",textShadow:"0 0 20px rgba(255, 215, 0, 0.5), 2px 2px 0px #b45309"},children:"SONIC BATTLE"}),o.jsxs("div",{className:"flex items-center gap-6 mt-4 p-4 rounded-2xl bg-black/40 backdrop-blur-md border border-white/10",children:[o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:"text-xs uppercase tracking-widest text-blue-400 font-bold mb-1",children:"Time Remaining"}),o.jsx("div",{className:`text-4xl font-mono font-bold tracking-widest ${re<6e4?"text-red-500 animate-pulse":"text-white"}`,children:zn(re)})]}),w&&o.jsx(R.div,{initial:{scale:0},animate:{scale:1},className:"px-4 py-2 bg-gradient-to-r from-red-600 to-orange-600 rounded-lg font-bold text-white animate-pulse shadow-lg shadow-red-500/30",children:"ðŸ FINAL LAP - 2x POINTS!"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsx("div",{className:"lg:col-span-1",children:o.jsxs("div",{className:`sticky top-24 rounded-3xl overflow-hidden border-2 shadow-2xl backdrop-blur-xl ${C?"bg-gray-900/80 border-blue-500/30":"bg-blue-900/80 border-sonic-gold/50"}`,children:[o.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-600/20 to-purple-600/20 border-b border-white/10",children:o.jsx("h2",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-sonic-gold to-yellow-300 uppercase tracking-wider flex items-center gap-2",children:"ðŸ† Leaderboard"})}),o.jsx("div",{className:"p-4 space-y-3 max-h-[70vh] overflow-y-auto custom-scrollbar",children:ut.map((N,O)=>o.jsx(Rn,{player:N.player,points:N.points,previousPoints:M.get(N.handle),maxPoints:Bn,rank:O+1},N.handle))})]})}),o.jsx("div",{className:"lg:col-span-2",children:o.jsxs("div",{className:`rounded-3xl p-6 border-2 shadow-2xl backdrop-blur-xl ${C?"bg-gray-800/60 border-gray-700":"bg-white/10 border-white/20"}`,children:[o.jsx("div",{className:"flex justify-between items-center mb-6",children:o.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[o.jsx("span",{className:"text-3xl",children:"ðŸ§©"}),o.jsx("span",{children:"Problems"}),o.jsx("span",{className:"text-sm font-normal px-3 py-1 rounded-full bg-blue-500/20 text-blue-300 border border-blue-500/30",children:"Sorted by Difficulty (Low â†’ High)"})]})}),!p.problems||p.problems.length===0?o.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(N=>o.jsx(Js,{},N))}):o.jsx("div",{className:"grid grid-cols-1 gap-4",style:{contain:"layout style paint"},children:Hn.map(({problem:N,problemId:O,points:H})=>{const G=D.get(O),_=J.get(O)||new Map;let U=null;if(G)U="AC";else{const Z=Array.from(_.values());Z.includes("OK")?U="AC":Z.includes("TIME_LIMIT_EXCEEDED")?U="TLE":Z.includes("WRONG_ANSWER")&&(U="WA")}return o.jsx(Cn,{problem:N,sonicPoints:H,status:U,solvedBy:G==null?void 0:G.handle},O)})})]})})]})]})]})}return o.jsx("div",{className:`min-h-screen p-4 md:p-8 transition-colors duration-300 relative ${C?"bg-gray-900":""}`,style:{zIndex:10},children:o.jsxs("div",{className:"max-w-6xl mx-auto relative",style:{zIndex:10},children:[o.jsxs("div",{className:"text-center mb-10 relative",style:{zIndex:10},children:[o.jsx(R.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:`text-5xl md:text-7xl font-extrabold mb-4 tracking-tight ${C?"":"neon-glow"}`,style:{color:"#FFD700"},children:"âš¡ SONIC BATTLE âš¡"}),o.jsx("p",{className:`text-xl md:text-2xl font-medium ${C?"text-gray-300":"text-blue-200"}`,children:"Competitive Coding Arena"})]}),Ve&&o.jsxs("div",{className:`mb-8 rounded-2xl p-6 shadow-xl border-2 ${C?"bg-gray-800/80 border-gray-600":"bg-blue-900/80 border-sonic-gold/50"}`,children:[o.jsx("h2",{className:"text-2xl font-bold mb-4 text-sonic-gold",children:"Join Battle"}),o.jsxs("div",{className:"flex gap-3 mb-4",children:[o.jsx("input",{type:"text",value:de,onChange:d=>Ue(d.target.value),placeholder:"Enter invite code or paste link",className:`flex-1 px-4 py-3 rounded-xl text-white input-field ${C?"input-field-dark-mode":""}`,style:{zIndex:15,pointerEvents:"auto"}}),o.jsx(R.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:d=>{d.preventDefault(),d.stopPropagation(),console.log("Join button clicked, invite code:",de);const m=de.trim();if(!m){ie("Please enter an invite code or paste the invite link.");return}let w=null;try{let _=m;if(m.includes("invite=")){const U=m.match(/invite=([^&]+)/);U&&(_=U[1])}if(_.length>50){const U=decodeURIComponent(escape(window.atob(_))),Z=JSON.parse(U);Z&&Z.matchId&&(w=Z)}}catch{}if(w){console.log("Serverless match config decoded manually:",w);const _=w,U=Date.now(),Z=_.startTime||U,ue=U>=Z;sessionStorage.setItem("matchConfig",JSON.stringify(_)),ie(""),Te(!1),e(ue?"/":"/countdown");return}let N=m;const O=m.match(/invite=([^&]+)/);if(O)N=O[1];else if(m.includes("http"))try{N=new URL(m).searchParams.get("invite")||m}catch{N=m}console.log("Extracted invite ID (legacy):",N);const H=`matchConfig_${N}`;console.log("Looking for match config with key:",H);const G=localStorage.getItem(H);if(G)try{const _=JSON.parse(G);console.log("Match config found:",_);const U=Date.now(),Z=_.startTime||U,ue=U>=Z;console.log("Match status:",{now:U,startTime:Z,hasStarted:ue}),sessionStorage.setItem("matchConfig",JSON.stringify(_)),ie(""),Te(!1),ue?(console.log("Match has started, redirecting to home page"),e("/")):(console.log("Match has not started, redirecting to countdown"),e("/countdown"))}catch(_){console.error("Error loading match:",_),ie(`Failed to load match: ${_.message}. Please check the invite code.`)}else{console.log("Match config not found in localStorage");const _=Object.keys(localStorage).filter(U=>U.startsWith("matchConfig_"));console.log("Available match configs in localStorage:",_),ie(`Match not found. The invite link may have expired or the battle was created on a different browser. Available matches: ${_.length}`)}},className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-xl transition-all relative",style:{zIndex:15,pointerEvents:"auto"},children:"Join"})]}),Ee&&o.jsx(R.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-4 p-4 bg-red-900/50 border-2 border-red-500 rounded-xl text-red-100 text-sm font-semibold",children:Ee}),o.jsx("div",{className:"flex items-center justify-between mt-4",children:o.jsx("button",{onClick:()=>{Te(!1),ie(""),Ue(""),e("/",{replace:!0})},className:"text-sm text-blue-300 hover:text-blue-200",children:"Cancel"})})]}),!Ve&&!p&&o.jsx("div",{className:"mb-8 text-center",children:o.jsx(R.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>Te(!0),className:`px-6 py-3 rounded-xl font-semibold transition-all relative ${C?"bg-gray-700 hover:bg-gray-600 text-white":"bg-blue-700 hover:bg-blue-600 text-white"}`,style:{zIndex:15,pointerEvents:"auto"},children:"âž• Join Battle with Code"})}),o.jsx(Hs,{darkMode:C}),o.jsxs("div",{className:`rounded-2xl p-8 md:p-10 shadow-2xl backdrop-blur-sm transition-all duration-300 relative ${C?"card-elevated-dark border-2 border-gray-700":"card-elevated sonic-border"}`,style:{zIndex:10},children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("label",{className:"block text-xl font-bold mb-4 text-sonic-gold",children:"Number of Players"}),o.jsxs("div",{className:"flex items-center justify-center gap-4",children:[o.jsx("button",{onClick:In,disabled:n<=2,className:"w-12 h-12 bg-blue-700 hover:bg-blue-600 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold text-xl rounded-lg transition-all relative",style:{zIndex:15,pointerEvents:n<=2?"none":"auto"},children:"âˆ’"}),o.jsx("input",{type:"text",inputMode:"numeric",min:"2",value:n,lang:"en-US",dir:"ltr",translate:"no",onChange:d=>{const m=d.target.value.replace(/[^0-9]/g,"");r(m);const w=Number(m);if(w>=2){const N=Array(w).fill("").map((O,H)=>s[H]||"");i(N),c({}),v({})}},onBlur:()=>{let d=Number(n)||2;d<2&&(d=2),r(d);const m=Array(d).fill("").map((w,N)=>s[N]||"");i(m),Number(n)!==d&&(c({}),v({}))},className:`w-24 px-4 py-3 border-2 rounded-lg text-center text-xl font-bold focus:outline-none focus:border-sonic-gold focus:ring-2 focus:ring-sonic-gold/50 ${C?"bg-gray-800/50 border-gray-600 text-white":"bg-blue-800/50 border-blue-600 text-white"}`}),o.jsx("button",{onClick:An,className:"w-12 h-12 bg-blue-700 hover:bg-blue-600 text-white font-bold text-xl rounded-lg transition-all relative",style:{zIndex:15,pointerEvents:"auto"},children:"+"})]})]}),o.jsxs("div",{className:"mb-10",children:[o.jsx("label",{className:`block text-xl font-bold mb-5 ${C?"text-gray-200":"text-sonic-gold"}`,children:"Player Handles"}),o.jsx("div",{className:"space-y-4",children:s.map((d,m)=>o.jsx(R.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:m*.1},children:o.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:gap-4 items-stretch md:items-center",children:[o.jsx("input",{type:"text",placeholder:`Player ${m+1} Handle`,value:d,onChange:w=>$n(m,w.target.value),className:`flex-1 px-5 py-3.5 input-field text-white placeholder-opacity-60 ${C?"bg-gray-800/50 border-gray-600 placeholder-gray-400":"placeholder-blue-300"}`,disabled:x}),a[m]&&o.jsxs(R.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-500/20 border-2 border-green-500 rounded-xl text-green-400 text-sm md:text-base font-bold whitespace-nowrap",children:[o.jsx("span",{className:"text-2xl",children:"âœ“"}),o.jsx("span",{className:"font-semibold",children:a[m].rating>0?`Rating: ${a[m].rating}`:"Unrated"})]}),h[m]&&o.jsxs(R.div,{initial:{scale:0},animate:{scale:1},className:"px-4 py-2 bg-red-500/20 border-2 border-red-500 rounded-xl text-red-400 font-semibold",children:["âœ— ",h[m]]})]})},m))})]}),o.jsxs("div",{className:"space-y-6 mb-8",children:[o.jsx(Ws,{darkMode:C,options:[{label:"Restrict to Specific Topics (Filter)",checked:!je,onChange:d=>Fn(!d)},{label:"Final Lap Mode (2x Points in last 25%)",checked:T,onChange:L}],children:!je&&o.jsxs(R.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsxs("span",{className:`text-sm font-bold ${C?"text-gray-400":"text-blue-300"}`,children:["Select Topics (",b.length,")"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:Dn,className:"text-xs px-2 py-1 bg-green-600 rounded text-white hover:bg-green-500 transition-colors",children:"All"}),o.jsx("button",{onClick:_n,className:"text-xs px-2 py-1 bg-red-600 rounded text-white hover:bg-red-500 transition-colors",children:"None"})]})]}),o.jsx("div",{className:`max-h-64 overflow-y-auto pr-2 custom-scrollbar grid grid-cols-1 md:grid-cols-2 gap-4 ${C?"scrollbar-dark":"scrollbar-light"}`,children:ye.map(d=>o.jsxs("label",{className:`flex items-center p-2 rounded-lg cursor-pointer transition-colors hover:translate-x-1 ${C?"hover:bg-gray-700/50":"hover:bg-blue-800/50"}`,children:[o.jsx("input",{type:"checkbox",checked:b.includes(d),onChange:()=>Ln(d),className:"w-4 h-4 mr-3 accent-sonic-gold cursor-pointer"}),o.jsx("span",{className:`text-sm font-medium ${C?"text-gray-300":"text-white"}`,children:d})]},d))}),o.jsx("p",{className:`text-xs text-center italic ${C?"text-gray-500":"text-blue-300"}`,children:b.length===0?"No topics selected (Defaults to All Topics)":""})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:`rounded-xl p-4 border-2 backdrop-blur-sm transition-all duration-200 ${C?"bg-gray-800/40 border-gray-700":"bg-blue-800/20 border-blue-600/40"}`,children:[o.jsx("label",{className:`block text-md font-bold mb-2 ${C?"text-gray-200":"text-sonic-gold"}`,children:"Rating Range"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[o.jsx("label",{className:`text-xs font-bold uppercase ${C?"text-gray-400":"text-blue-300"}`,children:"Min"}),o.jsx("input",{type:"text",inputMode:"numeric",value:X,lang:"en-US",dir:"ltr",translate:"no",onChange:d=>{const m=d.target.value.replace(/[^0-9]/g,"");if(m==="")B("");else{const w=Number(m);w<=3500&&B(w)}},onBlur:()=>{let d=Number(X)||800;d=Math.max(800,Math.min(Number(y)||3500,d)),B(d)},className:`w-full px-1 py-2 text-white text-center text-lg font-bold rounded-lg input-field shadow-inner ${C?"bg-gray-900/50 border-gray-600":""}`,style:{fontFeatureSettings:'"tnum"'}})]}),o.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[o.jsx("label",{className:`text-xs font-bold uppercase ${C?"text-gray-400":"text-blue-300"}`,children:"Max"}),o.jsx("input",{type:"text",inputMode:"numeric",value:y,lang:"en-US",dir:"ltr",translate:"no",onChange:d=>{const m=d.target.value.replace(/[^0-9]/g,"");if(m==="")z("");else{const w=Number(m);w<=3500&&z(w)}},onBlur:()=>{let d=Number(y)||2e3;d=Math.max(Number(X)||800,Math.min(3500,d)),z(d)},className:`w-full px-1 py-2 text-white text-center text-lg font-bold rounded-lg input-field shadow-inner ${C?"bg-gray-900/50 border-gray-600":""}`,style:{fontFeatureSettings:'"tnum"'}})]})]}),o.jsx("p",{className:`mt-2 text-center text-xs font-medium ${C?"text-gray-400":"text-blue-300"}`,children:"800 - 3500"})]}),o.jsxs("div",{className:`rounded-xl p-4 border-2 backdrop-blur-sm transition-all duration-200 ${C?"bg-gray-800/60 border-gray-600":"bg-blue-800/30 border-blue-600/50"}`,children:[o.jsx("label",{className:`block text-lg font-bold mb-3 ${C?"text-gray-200":"text-sonic-gold"}`,children:"Duration (min)"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",inputMode:"numeric",value:W,lang:"en-US",dir:"ltr",translate:"no",onChange:d=>{const m=d.target.value.replace(/[^0-9]/g,"");if(m==="")te("");else{const w=Number(m);w<=120&&te(w)}},onBlur:()=>{let d=Number(W)||20;d=Math.max(20,Math.min(120,d)),te(d)},className:`w-full px-4 py-3.5 pr-14 text-white text-center text-xl font-bold rounded-xl input-field shadow-inner ${C?"bg-gray-900/50 border-gray-600":""}`,style:{fontFeatureSettings:'"tnum"'}}),o.jsxs("div",{className:"absolute right-2 top-0 bottom-0 flex flex-col justify-center gap-0.5",children:[o.jsx(R.button,{whileHover:{scale:1.1},whileTap:{scale:.9},type:"button",onClick:()=>te(Math.min(120,W+5)),className:`w-7 h-6 flex items-center justify-center text-xs font-bold text-white rounded-t-md border-b transition-all ${C?"bg-gray-700 hover:bg-gray-600 border-gray-600":"bg-gradient-to-b from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 border-blue-500 shadow-md"}`,children:"â–²"}),o.jsx(R.button,{whileHover:{scale:1.1},whileTap:{scale:.9},type:"button",onClick:()=>te(Math.max(20,W-5)),className:`w-7 h-6 flex items-center justify-center text-xs font-bold text-white rounded-b-md transition-all ${C?"bg-gray-700 hover:bg-gray-600":"bg-gradient-to-b from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 shadow-md"}`,children:"â–¼"})]})]}),o.jsx("p",{className:`mt-3 text-center text-sm font-medium ${C?"text-gray-400":"text-blue-300"}`,children:"20 - 120 min"})]}),o.jsxs("div",{className:`rounded-xl p-4 border-2 backdrop-blur-sm transition-all duration-200 ${C?"bg-gray-800/60 border-gray-600":"bg-blue-800/30 border-blue-600/50"}`,children:[o.jsx("label",{className:`block text-lg font-bold mb-3 ${C?"text-gray-200":"text-sonic-gold"}`,children:"# Problems"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",inputMode:"numeric",value:se,lang:"en-US",dir:"ltr",translate:"no",onChange:d=>{const m=d.target.value.replace(/[^0-9]/g,"");if(m==="")Q("");else{const w=Number(m);w<=100&&Q(w)}},onBlur:()=>{let d=Number(se)||1;d=Math.max(1,Math.min(100,d)),Q(d)},className:`w-full px-4 py-3.5 pr-14 text-white text-center text-xl font-bold rounded-xl input-field shadow-inner ${C?"bg-gray-900/50 border-gray-600":""}`,style:{fontFeatureSettings:'"tnum"'}}),o.jsxs("div",{className:"absolute right-2 top-0 bottom-0 flex flex-col justify-center gap-0.5",children:[o.jsx(R.button,{whileHover:{scale:1.1},whileTap:{scale:.9},type:"button",onClick:()=>Q(Math.min(100,se+1)),className:`w-7 h-6 flex items-center justify-center text-xs font-bold text-white rounded-t-md border-b transition-all ${C?"bg-gray-700 hover:bg-gray-600 border-gray-600":"bg-gradient-to-b from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 border-blue-500 shadow-md"}`,children:"â–²"}),o.jsx(R.button,{whileHover:{scale:1.1},whileTap:{scale:.9},type:"button",onClick:()=>Q(Math.max(1,se-1)),className:`w-7 h-6 flex items-center justify-center text-xs font-bold text-white rounded-b-md transition-all ${C?"bg-gray-700 hover:bg-gray-600":"bg-gradient-to-b from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 shadow-md"}`,children:"â–¼"})]})]}),o.jsx("p",{className:`mt-3 text-center text-sm font-medium ${C?"text-gray-400":"text-blue-300"}`,children:"1 - 100"})]})]})]}),o.jsxs("div",{className:`mb-8 p-6 rounded-xl border-2 backdrop-blur-sm transition-all duration-200 ${C?"bg-gray-800/60 border-gray-600":"bg-blue-800/30 border-blue-600/50"}`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("span",{className:"text-3xl",children:"ðŸ“…"}),o.jsxs("div",{children:[o.jsx("h3",{className:`text-xl font-bold ${C?"text-gray-200":"text-sonic-gold"}`,children:"Schedule Match"}),o.jsx("p",{className:`text-sm ${C?"text-gray-400":"text-blue-300"}`,children:"Set a start time to sync all players"})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`text-sm font-semibold uppercase tracking-wider ${C?"text-gray-400":"text-blue-300"}`,children:"Date"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",inputMode:"numeric",value:q?q.split("T")[0]:"",placeholder:"YYYY-MM-DD",lang:"en-US",dir:"ltr",translate:"no",onChange:d=>{const m=d.target.value.replace(/[^0-9-]/g,""),w=q&&q.split("T")[1]||"00:00";ne(`${m}T${w}`)},className:`w-full px-4 py-3.5 pr-12 rounded-xl border-2 font-mono text-lg transition-all outline-none 
                        ${C?"bg-gray-900/50 border-gray-600 focus:border-sonic-gold text-white":"bg-blue-900/30 border-blue-500/50 focus:border-sonic-gold text-white"}`,disabled:!!we}),o.jsxs("div",{className:"absolute right-2 top-0 bottom-0 flex items-center justify-center w-10",children:[o.jsx("input",{type:"date",className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full",onChange:d=>{const m=d.target.value,w=q&&q.split("T")[1]||"00:00";ne(`${m}T${w}`)},min:new Date().toISOString().split("T")[0],disabled:!!we}),o.jsx("span",{className:"text-xl pointer-events-none",children:"ðŸ“…"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`text-sm font-semibold uppercase tracking-wider ${C?"text-gray-400":"text-blue-300"}`,children:"Time (HH:MM)"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",inputMode:"numeric",value:q?q.split("T")[1]||"00:00":"",placeholder:"HH:MM",lang:"en-US",dir:"ltr",translate:"no",onChange:d=>{const m=d.target.value.replace(/[^0-9:]/g,""),w=q?q.split("T")[0]:new Date().toISOString().split("T")[0];ne(`${w}T${m}`)},className:`w-full px-4 py-3.5 pr-12 rounded-xl border-2 font-mono text-lg transition-all outline-none 
                        ${C?"bg-gray-900/50 border-gray-600 focus:border-sonic-gold text-white":"bg-blue-900/30 border-blue-500/50 focus:border-sonic-gold text-white"}`,disabled:!!we}),o.jsxs("div",{className:"absolute right-2 top-0 bottom-0 flex items-center justify-center w-10",children:[o.jsx("input",{type:"time",className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full",onChange:d=>{const m=d.target.value,w=q?q.split("T")[0]:new Date().toISOString().split("T")[0];ne(`${w}T${m}`)},disabled:!!we}),o.jsx("span",{className:"text-xl pointer-events-none",children:"ðŸ•’"})]})]})]})]}),!we&&o.jsxs("div",{children:[o.jsx("label",{className:`block text-xs font-semibold mb-3 uppercase tracking-wider ${C?"text-gray-500":"text-blue-300"}`,children:"Quick Start Options"}),o.jsx("div",{className:"flex flex-wrap gap-3",children:[{label:"Now (+2m)",mins:2},{label:"+5 min",mins:5},{label:"+10 min",mins:10},{label:"+15 min",mins:15},{label:"+30 min",mins:30},{label:"+1 hour",mins:60}].map(d=>o.jsx("button",{onClick:()=>{const m=new Date;m.setMinutes(m.getMinutes()+d.mins);const w=m.getTimezoneOffset()*60*1e3,N=new Date(m.getTime()-w).toISOString().slice(0,16);ne(N)},className:`px-4 py-2 rounded-lg text-sm font-bold border transition-all hover:scale-105 active:scale-95 ${C?"bg-gray-700/50 border-gray-600 text-gray-300 hover:bg-gray-600 hover:text-white hover:border-sonic-gold":"bg-blue-700/30 border-blue-500/50 text-blue-100 hover:bg-blue-600 hover:text-white hover:border-sonic-gold"}`,children:d.label},d.label))})]})]})]}),Ee&&o.jsx(R.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-5 bg-red-900/50 border-2 border-red-500 rounded-xl text-red-100 font-semibold shadow-lg backdrop-blur-sm",children:Ee}),!p&&o.jsx(R.button,{whileHover:{scale:ve||Object.keys(a).length!==n||!q?1:1.02},whileTap:{scale:ve||Object.keys(a).length!==n||!q?1:.98},onClick:d=>{d.preventDefault(),d.stopPropagation(),console.log("Button clicked, calling handleStartBattle"),Un()},disabled:ve||Object.keys(a).length!==n||!q,className:`w-full py-5 font-extrabold text-2xl rounded-2xl transition-all duration-300 shadow-2xl relative ${ve||Object.keys(a).length!==n||!q?"bg-gradient-to-r from-gray-600 to-gray-700 text-gray-400 cursor-not-allowed":C?"bg-gradient-to-r from-sonic-gold via-yellow-500 to-sonic-gold text-gray-900 hover:from-yellow-400 hover:via-sonic-gold hover:to-yellow-400 shadow-yellow-500/50":"bg-gradient-to-r from-sonic-gold via-yellow-500 to-sonic-gold text-blue-900 hover:from-yellow-400 hover:via-sonic-gold hover:to-yellow-400 shadow-yellow-500/50"}`,style:{zIndex:15,pointerEvents:ve||Object.keys(a).length!==n||!q?"none":"auto"},children:ve?"Preparing Battle...":q?s.some(d=>!d.trim())?"âš ï¸ Please Enter Player Handles":Object.keys(a).length!==n?"Please Wait for Validation":"START BATTLE âš¡":"âš ï¸ Please Select Start Time (Required)"})]})]})})}function Xs(){const e=Nt(),[t,n]=S.useState(null),[r,s]=S.useState(0),[i,a]=S.useState(""),[c,x]=S.useState(()=>{const g=localStorage.getItem("darkMode");return g!==null?g==="true":document.body.classList.contains("dark-mode")});return S.useEffect(()=>{const g=new URLSearchParams(window.location.search).get("invite");let h=sessionStorage.getItem("matchConfig");if(!h&&g&&(h=localStorage.getItem(`matchConfig_${g}`),h&&sessionStorage.setItem("matchConfig",h)),!h){e("/");return}try{const v=JSON.parse(h);n(v);const T=v.startTime||Date.now(),L=Date.now(),b=Math.max(0,T-L);s(b);const j=JSON.stringify(v),z=`https://Abdelrahman139.github.io/Codeforces-Sonic-battle-game/#/?invite=${btoa(unescape(encodeURIComponent(j)))}`;a(z);const X=setInterval(()=>{const B=Date.now(),W=Math.max(0,T-B);s(W),W<=0&&(clearInterval(X),e("/"))},1e3);return()=>clearInterval(X)}catch(v){console.error("Error loading match config:",v),e("/")}},[e]),S.useEffect(()=>{const g=h=>{x(h.detail)};return window.addEventListener("darkModeChange",g),()=>window.removeEventListener("darkModeChange",g)},[]),S.useEffect(()=>{c?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")},[c]),t?o.jsx("div",{className:`min-h-screen p-4 md:p-8 pt-20 relative transition-colors duration-300 ${c?"bg-gray-900":""}`,style:{zIndex:10},children:o.jsxs("div",{className:"max-w-4xl mx-auto relative",style:{zIndex:10},children:[o.jsx("div",{className:"text-center mb-8",children:o.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4 neon-glow",style:{color:"#FFD700"},children:"âš¡ Battle Starting Soon âš¡"})}),o.jsx(zs,{countdown:r,inviteLink:i,darkMode:c})]})}):null}function Zs({players:e,solvedProblems:t,problems:n}){const r=S.useMemo(()=>{const s={},i=new Map(t);return e.forEach(a=>{const c=Array.from(i.values()).filter(h=>h.handle===a.handle).length,g=Array.from(i.entries()).filter(([h,v])=>v.handle===a.handle).map(([h,v])=>h).map(h=>{const v=n.find(T=>`${T.contestId}-${T.index}`===h);return v?{id:h,name:`${v.contestId}${v.index}. ${v.name}`,rating:v.rating||0}:null}).filter(Boolean);s[a.handle]={handle:a.handle,solvedCount:c,solvedProblems:g,totalProblems:n.length}}),s},[e,t,n]);return o.jsxs("div",{className:"bg-blue-900/50 rounded-lg p-6 sonic-border",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4 text-sonic-gold",children:"Player Statistics"}),o.jsx("div",{className:"space-y-4",children:Object.values(r).map((s,i)=>o.jsxs(R.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i*.1},className:"p-4 bg-blue-800/50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:s.handle}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-2xl font-bold text-sonic-gold",children:[s.solvedCount,"/",s.totalProblems]}),o.jsx("div",{className:"text-sm text-blue-300",children:"Problems Solved"})]})]}),s.solvedProblems.length>0&&o.jsxs("div",{className:"mt-3",children:[o.jsx("h4",{className:"text-sm font-semibold text-blue-200 mb-2",children:"Solved Problems:"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:s.solvedProblems.map(a=>o.jsx(R.span,{initial:{scale:0},animate:{scale:1},className:"px-3 py-1 bg-green-900/50 border border-green-500 rounded-lg text-sm text-green-300",children:a.name},a.id))})]})]},s.handle))})]})}var Rt={};(function e(t,n,r,s){var i=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),a=typeof Path2D=="function"&&typeof DOMMatrix=="function",c=function(){if(!t.OffscreenCanvas)return!1;try{var f=new OffscreenCanvas(1,1),l=f.getContext("2d");l.fillRect(0,0,1,1);var E=f.transferToImageBitmap();l.createPattern(E,"no-repeat")}catch{return!1}return!0}();function x(){}function g(f){var l=n.exports.Promise,E=l!==void 0?l:t.Promise;return typeof E=="function"?new E(f):(f(x,x),null)}var h=function(f,l){return{transform:function(E){if(f)return E;if(l.has(E))return l.get(E);var p=new OffscreenCanvas(E.width,E.height),P=p.getContext("2d");return P.drawImage(E,0,0),l.set(E,p),p},clear:function(){l.clear()}}}(c,new Map),v=function(){var f=Math.floor(16.666666666666668),l,E,p={},P=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(l=function(A){var k=Math.random();return p[k]=requestAnimationFrame(function M($){P===$||P+f-1<$?(P=$,delete p[k],A()):p[k]=requestAnimationFrame(M)}),k},E=function(A){p[A]&&cancelAnimationFrame(p[A])}):(l=function(A){return setTimeout(A,f)},E=function(A){return clearTimeout(A)}),{frame:l,cancel:E}}(),T=function(){var f,l,E={};function p(P){function A(k,M){P.postMessage({options:k||{},callback:M})}P.init=function(M){var $=M.transferControlToOffscreen();P.postMessage({canvas:$},[$])},P.fire=function(M,$,D){if(l)return A(M,null),l;var V=Math.random().toString(36).slice(2);return l=g(function(J){function K(ee){ee.data.callback===V&&(delete E[V],P.removeEventListener("message",K),l=null,h.clear(),D(),J())}P.addEventListener("message",K),A(M,V),E[V]=K.bind(null,{data:{callback:V}})}),l},P.reset=function(){P.postMessage({reset:!0});for(var M in E)E[M](),delete E[M]}}return function(){if(f)return f;if(!r&&i){var P=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{f=new Worker(URL.createObjectURL(new Blob([P])))}catch(A){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",A),null}p(f)}return f}}(),L={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function b(f,l){return l?l(f):f}function j(f){return f!=null}function y(f,l,E){return b(f&&j(f[l])?f[l]:L[l],E)}function z(f){return f<0?0:Math.floor(f)}function X(f,l){return Math.floor(Math.random()*(l-f))+f}function B(f){return parseInt(f,16)}function W(f){return f.map(te)}function te(f){var l=String(f).replace(/[^0-9a-f]/gi,"");return l.length<6&&(l=l[0]+l[0]+l[1]+l[1]+l[2]+l[2]),{r:B(l.substring(0,2)),g:B(l.substring(2,4)),b:B(l.substring(4,6))}}function se(f){var l=y(f,"origin",Object);return l.x=y(l,"x",Number),l.y=y(l,"y",Number),l}function Q(f){f.width=document.documentElement.clientWidth,f.height=document.documentElement.clientHeight}function Se(f){var l=f.getBoundingClientRect();f.width=l.width,f.height=l.height}function xe(f){var l=document.createElement("canvas");return l.style.position="fixed",l.style.top="0px",l.style.left="0px",l.style.pointerEvents="none",l.style.zIndex=f,l}function je(f,l,E,p,P,A,k,M,$){f.save(),f.translate(l,E),f.rotate(A),f.scale(p,P),f.arc(0,0,1,k,M,$),f.restore()}function Pe(f){var l=f.angle*(Math.PI/180),E=f.spread*(Math.PI/180);return{x:f.x,y:f.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:f.startVelocity*.5+Math.random()*f.startVelocity,angle2D:-l+(.5*E-Math.random()*E),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:f.color,shape:f.shape,tick:0,totalTicks:f.ticks,decay:f.decay,drift:f.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:f.gravity*3,ovalScalar:.6,scalar:f.scalar,flat:f.flat}}function C(f,l){l.x+=Math.cos(l.angle2D)*l.velocity+l.drift,l.y+=Math.sin(l.angle2D)*l.velocity+l.gravity,l.velocity*=l.decay,l.flat?(l.wobble=0,l.wobbleX=l.x+10*l.scalar,l.wobbleY=l.y+10*l.scalar,l.tiltSin=0,l.tiltCos=0,l.random=1):(l.wobble+=l.wobbleSpeed,l.wobbleX=l.x+10*l.scalar*Math.cos(l.wobble),l.wobbleY=l.y+10*l.scalar*Math.sin(l.wobble),l.tiltAngle+=.1,l.tiltSin=Math.sin(l.tiltAngle),l.tiltCos=Math.cos(l.tiltAngle),l.random=Math.random()+2);var E=l.tick++/l.totalTicks,p=l.x+l.random*l.tiltCos,P=l.y+l.random*l.tiltSin,A=l.wobbleX+l.random*l.tiltCos,k=l.wobbleY+l.random*l.tiltSin;if(f.fillStyle="rgba("+l.color.r+", "+l.color.g+", "+l.color.b+", "+(1-E)+")",f.beginPath(),a&&l.shape.type==="path"&&typeof l.shape.path=="string"&&Array.isArray(l.shape.matrix))f.fill(we(l.shape.path,l.shape.matrix,l.x,l.y,Math.abs(A-p)*.1,Math.abs(k-P)*.1,Math.PI/10*l.wobble));else if(l.shape.type==="bitmap"){var M=Math.PI/10*l.wobble,$=Math.abs(A-p)*.1,D=Math.abs(k-P)*.1,V=l.shape.bitmap.width*l.scalar,J=l.shape.bitmap.height*l.scalar,K=new DOMMatrix([Math.cos(M)*$,Math.sin(M)*$,-Math.sin(M)*D,Math.cos(M)*D,l.x,l.y]);K.multiplySelf(new DOMMatrix(l.shape.matrix));var ee=f.createPattern(h.transform(l.shape.bitmap),"no-repeat");ee.setTransform(K),f.globalAlpha=1-E,f.fillStyle=ee,f.fillRect(l.x-V/2,l.y-J/2,V,J),f.globalAlpha=1}else if(l.shape==="circle")f.ellipse?f.ellipse(l.x,l.y,Math.abs(A-p)*l.ovalScalar,Math.abs(k-P)*l.ovalScalar,Math.PI/10*l.wobble,0,2*Math.PI):je(f,l.x,l.y,Math.abs(A-p)*l.ovalScalar,Math.abs(k-P)*l.ovalScalar,Math.PI/10*l.wobble,0,2*Math.PI);else if(l.shape==="star")for(var F=Math.PI/2*3,re=4*l.scalar,ae=8*l.scalar,oe=l.x,ce=l.y,he=5,de=Math.PI/he;he--;)oe=l.x+Math.cos(F)*ae,ce=l.y+Math.sin(F)*ae,f.lineTo(oe,ce),F+=de,oe=l.x+Math.cos(F)*re,ce=l.y+Math.sin(F)*re,f.lineTo(oe,ce),F+=de;else f.moveTo(Math.floor(l.x),Math.floor(l.y)),f.lineTo(Math.floor(l.wobbleX),Math.floor(P)),f.lineTo(Math.floor(A),Math.floor(k)),f.lineTo(Math.floor(p),Math.floor(l.wobbleY));return f.closePath(),f.fill(),l.tick<l.totalTicks}function ye(f,l,E,p,P){var A=l.slice(),k=f.getContext("2d"),M,$,D=g(function(V){function J(){M=$=null,k.clearRect(0,0,p.width,p.height),h.clear(),P(),V()}function K(){r&&!(p.width===s.width&&p.height===s.height)&&(p.width=f.width=s.width,p.height=f.height=s.height),!p.width&&!p.height&&(E(f),p.width=f.width,p.height=f.height),k.clearRect(0,0,p.width,p.height),A=A.filter(function(ee){return C(k,ee)}),A.length?M=v.frame(K):J()}M=v.frame(K),$=J});return{addFettis:function(V){return A=A.concat(V),D},canvas:f,promise:D,reset:function(){M&&v.cancel(M),$&&$()}}}function pe(f,l){var E=!f,p=!!y(l||{},"resize"),P=!1,A=y(l,"disableForReducedMotion",Boolean),k=i&&!!y(l||{},"useWorker"),M=k?T():null,$=E?Q:Se,D=f&&M?!!f.__confetti_initialized:!1,V=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,J;function K(F,re,ae){for(var oe=y(F,"particleCount",z),ce=y(F,"angle",Number),he=y(F,"spread",Number),de=y(F,"startVelocity",Number),Ue=y(F,"decay",Number),Ve=y(F,"gravity",Number),Te=y(F,"drift",Number),ve=y(F,"colors",W),Ce=y(F,"ticks",Number),Ee=y(F,"shapes"),ie=y(F,"scalar"),Ke=!!y(F,"flat"),Ae=se(F),Be=oe,Ie=[],Xe=f.width*Ae.x,Ze=f.height*Ae.y;Be--;)Ie.push(Pe({x:Xe,y:Ze,angle:ce,spread:he,startVelocity:de,color:ve[Be%ve.length],shape:Ee[X(0,Ee.length)],ticks:Ce,decay:Ue,gravity:Ve,drift:Te,scalar:ie,flat:Ke}));return J?J.addFettis(Ie):(J=ye(f,Ie,$,re,ae),J.promise)}function ee(F){var re=A||y(F,"disableForReducedMotion",Boolean),ae=y(F,"zIndex",Number);if(re&&V)return g(function(de){de()});E&&J?f=J.canvas:E&&!f&&(f=xe(ae),document.body.appendChild(f)),p&&!D&&$(f);var oe={width:f.width,height:f.height};M&&!D&&M.init(f),D=!0,M&&(f.__confetti_initialized=!0);function ce(){if(M){var de={getBoundingClientRect:function(){if(!E)return f.getBoundingClientRect()}};$(de),M.postMessage({resize:{width:de.width,height:de.height}});return}oe.width=oe.height=null}function he(){J=null,p&&(P=!1,t.removeEventListener("resize",ce)),E&&f&&(document.body.contains(f)&&document.body.removeChild(f),f=null,D=!1)}return p&&!P&&(P=!0,t.addEventListener("resize",ce,!1)),M?M.fire(F,oe,he):K(F,oe,he)}return ee.reset=function(){M&&M.reset(),J&&J.reset()},ee}var q;function ne(){return q||(q=pe(null,{useWorker:!0,resize:!0})),q}function we(f,l,E,p,P,A,k){var M=new Path2D(f),$=new Path2D;$.addPath(M,new DOMMatrix(l));var D=new Path2D;return D.addPath($,new DOMMatrix([Math.cos(k)*P,Math.sin(k)*P,-Math.sin(k)*A,Math.cos(k)*A,E,p])),D}function ge(f){if(!a)throw new Error("path confetti are not supported in this browser");var l,E;typeof f=="string"?l=f:(l=f.path,E=f.matrix);var p=new Path2D(l),P=document.createElement("canvas"),A=P.getContext("2d");if(!E){for(var k=1e3,M=k,$=k,D=0,V=0,J,K,ee=0;ee<k;ee+=2)for(var F=0;F<k;F+=2)A.isPointInPath(p,ee,F,"nonzero")&&(M=Math.min(M,ee),$=Math.min($,F),D=Math.max(D,ee),V=Math.max(V,F));J=D-M,K=V-$;var re=10,ae=Math.min(re/J,re/K);E=[ae,0,0,ae,-Math.round(J/2+M)*ae,-Math.round(K/2+$)*ae]}return{type:"path",path:l,matrix:E}}function _e(f){var l,E=1,p="#000000",P='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof f=="string"?l=f:(l=f.text,E="scalar"in f?f.scalar:E,P="fontFamily"in f?f.fontFamily:P,p="color"in f?f.color:p);var A=10*E,k=""+A+"px "+P,M=new OffscreenCanvas(A,A),$=M.getContext("2d");$.font=k;var D=$.measureText(l),V=Math.ceil(D.actualBoundingBoxRight+D.actualBoundingBoxLeft),J=Math.ceil(D.actualBoundingBoxAscent+D.actualBoundingBoxDescent),K=2,ee=D.actualBoundingBoxLeft+K,F=D.actualBoundingBoxAscent+K;V+=K+K,J+=K+K,M=new OffscreenCanvas(V,J),$=M.getContext("2d"),$.font=k,$.fillStyle=p,$.fillText(l,ee,F);var re=1/E;return{type:"bitmap",bitmap:M.transferToImageBitmap(),matrix:[re,0,0,re,-V*re/2,-J*re/2]}}n.exports=function(){return ne().apply(this,arguments)},n.exports.reset=function(){ne().reset()},n.exports.create=pe,n.exports.shapeFromPath=ge,n.exports.shapeFromText=_e})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Rt,!1);const gt=Rt.exports;Rt.exports.create;function Gs(){return S.useEffect(()=>{const t=Date.now()+3e3,n=()=>{gt({particleCount:2,angle:60,spread:55,origin:{x:0},colors:["#FFD700","#0000FF"]}),gt({particleCount:2,angle:120,spread:55,origin:{x:1},colors:["#FFD700","#0000FF"]}),Date.now()<t&&requestAnimationFrame(n)};n(),gt({particleCount:100,spread:70,origin:{y:.6}})},[]),null}function Ys(){const e=Nt(),[t,n]=S.useState(null),[r,s]=S.useState(!1);if(S.useEffect(()=>{const T=sessionStorage.getItem("matchResults");T?n(JSON.parse(T)):e("/")},[e]),!t)return o.jsx("div",{className:"min-h-screen flex items-center justify-center relative z-10",children:o.jsxs(R.div,{animate:{x:[0,30,-30,0]},transition:{duration:1,repeat:1/0,ease:"easeInOut"},className:"text-center",children:[o.jsx("div",{className:"text-6xl mb-4",children:"ðŸƒ"}),o.jsx("div",{className:"text-2xl",children:"Loading results..."})]})});const{players:i,solvedProblems:a,mysteryProblemIndex:c,matchConfig:x}=t,g=new Map(a),h=()=>{s(!0)},v=()=>{var L,b;const T=`${window.location.origin}/results?match=${(x==null?void 0:x.matchId)||"current"}`;navigator.share?navigator.share({title:"Sonic Battle Results",text:`Check out the results! Winner: ${((L=i[0])==null?void 0:L.handle)||"N/A"} with ${((b=i[0])==null?void 0:b.points)||0} points!`,url:T}).catch(j=>{console.log("Error sharing:",j)}):navigator.clipboard.writeText(T).then(()=>{alert("Results link copied to clipboard!")}).catch(()=>{prompt("Copy this link to share:",T)})};return o.jsxs("div",{className:"min-h-screen p-4 md:p-8 pt-20 relative",style:{zIndex:10},children:[i.length>0&&o.jsx(Gs,{}),o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("div",{className:"text-center mb-8",children:o.jsx("h1",{className:"text-5xl md:text-7xl font-bold mb-4 neon-glow",style:{color:"#FFD700"},children:"ðŸ MATCH RESULTS ðŸ"})}),i.length>0&&o.jsxs(R.div,{initial:{scale:0},animate:{scale:1},className:"text-center mb-8 p-8 bg-gradient-to-r from-sonic-gold to-yellow-400 rounded-lg sonic-border",children:[o.jsx("div",{className:"text-6xl mb-4",children:"ðŸ†"}),o.jsxs("div",{className:"text-3xl md:text-4xl font-bold text-blue-900",children:["Winner: ",i[0].handle]}),o.jsxs("div",{className:"text-2xl text-blue-800 mt-2",children:[i[0].points," Sonic Points"]})]}),o.jsxs("div",{className:"mb-8 bg-blue-900/50 rounded-lg p-6 sonic-border",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4 text-sonic-gold",children:"Final Standings"}),o.jsx("div",{className:"space-y-4",children:i.map((T,L)=>{var b;return o.jsxs(R.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:L*.1},className:"flex items-center justify-between p-4 bg-blue-800/50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"text-3xl",children:L===0?"ðŸ¥‡":L===1?"ðŸ¥ˆ":L===2?"ðŸ¥‰":"ðŸƒ"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xl font-bold",children:T.handle}),((b=T.playerInfo)==null?void 0:b.rating)>0&&o.jsxs("div",{className:"text-sm text-blue-300",children:["Rating: ",T.playerInfo.rating]})]})]}),o.jsxs("div",{className:"text-2xl font-bold text-sonic-gold",children:[T.points," pts"]})]},T.handle)})})]}),!r&&c>=0&&o.jsx("div",{className:"mb-8 text-center",children:o.jsx("button",{onClick:h,className:"px-8 py-4 bg-purple-600 hover:bg-purple-700 rounded-lg font-bold text-xl transition-all transform hover:scale-105",children:"ðŸ”® Reveal Mystery Problem (2x Points!)"})}),r&&c>=0&&(x==null?void 0:x.problems)&&o.jsxs(R.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"mb-8 bg-purple-900/50 rounded-lg p-6 sonic-border",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4 text-purple-300",children:"ðŸ”® Mystery Problem"}),(()=>{const T=x.problems[c],L=`${T.contestId}-${T.index}`,b=g.get(L);return o.jsxs("div",{className:"p-4 bg-purple-800/50 rounded-lg",children:[o.jsxs("div",{className:"text-xl font-bold mb-2",children:[T.contestId,T.index,". ",T.name]}),o.jsxs("div",{className:"text-lg text-purple-200",children:["This problem awarded ",o.jsx("span",{className:"font-bold text-sonic-gold",children:"2x points"}),"!"]}),b&&o.jsxs("div",{className:"mt-2 text-green-400",children:["âœ“ Solved by ",b.handle]})]})})()]}),o.jsx(Zs,{players:(x==null?void 0:x.players)||[],solvedProblems:a,problems:(x==null?void 0:x.problems)||[]}),o.jsxs("div",{className:"mb-8 bg-blue-900/50 rounded-lg p-6 sonic-border",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4 text-sonic-gold",children:"Problems Solved"}),o.jsxs("div",{className:"space-y-2",children:[Array.from(g.entries()).map(([T,L])=>{var j;const b=(j=x==null?void 0:x.problems)==null?void 0:j.find(y=>`${y.contestId}-${y.index}`===T);return b?o.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-800/50 rounded-lg",children:[o.jsx("div",{children:o.jsxs("a",{href:`https://codeforces.com/problemset/problem/${b.contestId}/${b.index}`,target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-sonic-gold",children:[b.contestId,b.index,". ",b.name]})}),o.jsxs("div",{className:"text-green-400 font-semibold",children:["Solved by ",L.handle]})]},T):null}),g.size===0&&o.jsx("div",{className:"text-center text-blue-300 py-8",children:"No problems were solved in this match."})]})]}),o.jsxs("div",{className:"flex gap-4 justify-center flex-wrap",children:[o.jsx(R.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e("/"),className:"px-8 py-4 bg-sonic-gold hover:bg-yellow-400 text-blue-900 font-bold text-xl rounded-lg transition-all",children:"New Match"}),o.jsx(R.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:v,className:"px-8 py-4 bg-green-600 hover:bg-green-700 font-bold text-xl rounded-lg transition-all text-white",children:"ðŸ“¤ Share Results"})]})]})]})}function Qs(){const e=Gt(),[t]=S.useState(!0);S.useEffect(()=>{document.body.classList.add("dark-mode"),localStorage.setItem("darkMode","true")},[]);const n=r=>e.pathname==="/";return o.jsx("nav",{className:"fixed top-0 left-0 right-0 bg-gradient-to-r from-blue-900/95 to-blue-800/95 backdrop-blur-md border-b-2 border-sonic-gold/50 shadow-lg",style:{zIndex:50},children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("button",{onClick:()=>{sessionStorage.removeItem("matchConfig"),e.pathname==="/"?window.location.reload():window.location.href="#/"},className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[o.jsx(R.div,{whileHover:{rotate:360},transition:{duration:.5},className:"text-3xl",children:"âš¡"}),o.jsx("span",{className:"text-xl font-bold text-sonic-gold neon-glow",children:"SONIC BATTLE"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>{sessionStorage.removeItem("matchConfig"),e.pathname==="/"?window.location.reload():window.location.href="#/"},className:`px-4 py-2 rounded-lg font-semibold transition-all duration-200 relative ${n()&&e.pathname==="/"?"bg-sonic-gold text-blue-900 shadow-lg shadow-yellow-500/50":"text-white hover:bg-blue-700/50 cursor-pointer"}`,style:{zIndex:15,pointerEvents:"auto"},children:"Home"}),e.pathname==="/results"&&o.jsx("span",{className:"px-4 py-2 rounded-lg font-semibold bg-green-600/80 text-white",children:"Results"})]})]})})})}const Mn=nt.memo(({delay:e,x:t,y:n,duration:r})=>o.jsx(R.div,{initial:{opacity:.2,scale:1,x:0,y:0},className:"absolute text-sonic-gold/15 text-3xl pointer-events-none",style:{left:`${t}%`,top:`${n}%`,willChange:"transform, opacity"},children:"â­•"}));Mn.displayName="FloatingRing";const On=nt.memo(({delay:e,x:t,y:n})=>o.jsx(R.div,{initial:{opacity:.2,scale:1},className:"absolute text-sonic-blue/25 text-xl pointer-events-none",style:{left:`${t}%`,top:`${n}%`,willChange:"transform, opacity"},children:"ðŸš©"}));On.displayName="Checkpoint";const Zt=(()=>{const e=Array.from({length:4},(n,r)=>({id:r,x:Math.random()*100,y:Math.random()*100,delay:Math.random()*2,duration:3+Math.random()*2})),t=Array.from({length:2},(n,r)=>({id:r,x:Math.random()*100,y:Math.random()*100,delay:Math.random()*2}));return{rings:e,checkpoints:t}})(),Pn=nt.memo(()=>o.jsxs("div",{className:"fixed inset-0 overflow-hidden",style:{zIndex:0,pointerEvents:"none"},children:[Zt.rings.map(e=>o.jsx(Mn,{delay:e.delay,x:e.x,y:e.y,duration:e.duration},e.id)),Zt.checkpoints.map(e=>o.jsx(On,{delay:e.delay,x:e.x,y:e.y},e.id))]}));Pn.displayName="AnimatedBackground";function eo(){const e=Gt(),t={initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20}},n={type:"tween",ease:"easeInOut",duration:.25};return o.jsxs(o.Fragment,{children:[o.jsx(Pn,{}),o.jsx(Qs,{}),o.jsx("div",{className:"relative pt-16",style:{zIndex:10,position:"relative"},children:o.jsx(St,{mode:"wait",children:o.jsxs(Xn,{location:e,children:[o.jsx(ft,{path:"/",element:o.jsx(R.div,{variants:t,initial:"initial",animate:"animate",exit:"exit",transition:n,children:o.jsx(Ks,{})})}),o.jsx(ft,{path:"/countdown",element:o.jsx(R.div,{variants:t,initial:"initial",animate:"animate",exit:"exit",transition:n,children:o.jsx(Xs,{})})}),o.jsx(ft,{path:"/results",element:o.jsx(R.div,{variants:t,initial:"initial",animate:"animate",exit:"exit",transition:n,children:o.jsx(Ys,{})})})]},e.pathname)})})]})}function to(){return o.jsx(Kn,{children:o.jsx(eo,{})})}bt.createRoot(document.getElementById("root")).render(o.jsx(nt.StrictMode,{children:o.jsx(to,{})}));
